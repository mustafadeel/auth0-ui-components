{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "user-mfa-management",
  "type": "registry:block",
  "title": "User Mfa Management",
  "description": "A block for managing user mfa functionality.",
  "dependencies": [
    "@auth0-web-ui-components/core",
    "@auth0/auth0-react",
    "@hookform/resolvers",
    "@radix-ui/react-dialog",
    "class-variance-authority",
    "clsx",
    "lucide-react",
    "next-themes",
    "react",
    "react-dom",
    "react-hook-form",
    "react-qr-code",
    "sonner",
    "tailwind-merge"
  ],
  "registryDependencies": [
    "badge",
    "button",
    "card",
    "dialog",
    "form",
    "popover",
    "separator",
    "sonner"
  ],
  "files": [
    {
      "path": "src/components/mfa/contact-input-form.tsx",
      "content": "import * as React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { MailIcon, SmartphoneIcon } from 'lucide-react';\n\nimport {\n  MFAType,\n  FACTOR_TYPE_EMAIL,\n  createEmailContactSchema,\n  createSmsContactSchema,\n  type EmailContactForm,\n  type SmsContactForm,\n  type EnrollMfaResponse,\n} from '@auth0-web-ui-components/core';\n\nimport { Button } from '@/components/ui/button';\nimport { Spinner } from '@/components/ui/spinner';\nimport {\n  Form,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormMessage,\n} from '@/components/ui/form';\nimport { TextField } from '@/components/ui/text-field';\nimport { useTranslator } from '@/hooks';\nimport { useContactEnrollment } from '@/hooks/mfa';\nimport { ENTER_CONTACT, ENROLL, CONFIRM, ENTER_OTP } from '@/lib/mfa-constants';\n\nimport { OTPVerificationForm } from './otp-verification-form';\n\ntype ContactForm = EmailContactForm | SmsContactForm;\n\ntype ContactInputFormProps = {\n  factorType: MFAType;\n  enrollMfa: (factor: MFAType, options: Record<string, string>) => Promise<EnrollMfaResponse>;\n  confirmEnrollment: (\n    factor: MFAType,\n    options: { oobCode?: string; userOtpCode?: string },\n  ) => Promise<unknown | null>;\n  onError: (error: Error, stage: typeof ENROLL | typeof CONFIRM) => void;\n  onSuccess: () => void;\n  onClose: () => void;\n  schemaValidation?: { email?: RegExp; phone?: RegExp };\n};\n\nconst PHASES = {\n  ENTER_CONTACT: ENTER_CONTACT,\n  ENTER_OTP: ENTER_OTP,\n} as const;\n\ntype Phase = (typeof PHASES)[keyof typeof PHASES];\n\nexport function ContactInputForm({\n  factorType,\n  enrollMfa,\n  onError,\n  confirmEnrollment,\n  onSuccess,\n  onClose,\n  schemaValidation,\n}: ContactInputFormProps) {\n  const [phase, setPhase] = React.useState<Phase>(ENTER_CONTACT);\n  const { t } = useTranslator('mfa');\n\n  const { onSubmitContact, loading, contactData, setContactData } = useContactEnrollment({\n    factorType,\n    enrollMfa,\n    onError,\n  });\n\n  const ContactSchema = React.useMemo(() => {\n    return factorType === FACTOR_TYPE_EMAIL\n      ? createEmailContactSchema(t('errors.invalid_email'), schemaValidation?.email)\n      : createSmsContactSchema(t('errors.invalid_phone_number'), schemaValidation?.phone);\n  }, [factorType, t, schemaValidation]);\n\n  const form = useForm<ContactForm>({\n    resolver: zodResolver(ContactSchema),\n    mode: 'onTouched',\n    reValidateMode: 'onChange',\n    defaultValues: { contact: contactData.contact || '' },\n  });\n\n  const handleCancel = () => {\n    form.reset();\n    setContactData({\n      contact: null,\n      oobCode: null,\n    });\n    onClose?.();\n  };\n\n  const handleBack = React.useCallback(() => {\n    setPhase(ENTER_CONTACT);\n  }, [phase]);\n\n  const handleSubmit = React.useCallback(\n    async (data: ContactForm) => {\n      await onSubmitContact(data);\n      setPhase(ENTER_OTP);\n    },\n    [onSubmitContact],\n  );\n\n  const renderContactScreen = () => (\n    <div className=\"w-full max-w-sm mx-auto\">\n      <div className=\"flex flex-col items-center justify-center flex-1 space-y-10\">\n        {loading ? (\n          <div\n            className=\"absolute inset-0 flex items-center justify-center\"\n            role=\"status\"\n            aria-live=\"polite\"\n          >\n            <Spinner aria-label={t('loading')} />\n          </div>\n        ) : (\n          <>\n            <p className=\"text-center text-sm font-normal\" id=\"contact-description\">\n              {factorType === FACTOR_TYPE_EMAIL\n                ? t('enrollment_form.enroll_email_description')\n                : t('enrollment_form.enroll_sms_description')}\n            </p>\n\n            <div className=\"w-full\">\n              <Form {...form}>\n                <form\n                  onSubmit={form.handleSubmit(handleSubmit)}\n                  className=\"space-y-6\"\n                  aria-describedby=\"contact-description\"\n                >\n                  <FormField\n                    control={form.control}\n                    name=\"contact\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-sm font-normal\" htmlFor=\"contact-input\">\n                          {factorType === FACTOR_TYPE_EMAIL\n                            ? t('enrollment_form.email_address')\n                            : t('enrollment_form.phone_number')}\n                        </FormLabel>\n                        <FormControl>\n                          <TextField\n                            id=\"contact-input\"\n                            type={factorType === FACTOR_TYPE_EMAIL ? 'email' : 'tel'}\n                            autoComplete={factorType === FACTOR_TYPE_EMAIL ? 'email' : 'tel'}\n                            startAdornment={\n                              <div className=\"p-1.5\" aria-hidden=\"true\">\n                                {factorType === FACTOR_TYPE_EMAIL ? (\n                                  <MailIcon />\n                                ) : (\n                                  <SmartphoneIcon />\n                                )}\n                              </div>\n                            }\n                            placeholder={\n                              factorType === FACTOR_TYPE_EMAIL\n                                ? t('enrollment_form.enroll_email_placeholder')\n                                : t('enrollment_form.enroll_sms_placeholder')\n                            }\n                            error={Boolean(form.formState.errors.contact)}\n                            aria-invalid={Boolean(form.formState.errors.contact)}\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage className=\"text-left\" id=\"contact-error\" role=\"alert\" />\n                      </FormItem>\n                    )}\n                  />\n                  <div className=\"flex flex-col gap-3 justify-center\">\n                    <Button\n                      type=\"submit\"\n                      size=\"lg\"\n                      className=\"text-sm\"\n                      disabled={!form.formState.isValid || loading}\n                      aria-label={t('submit')}\n                    >\n                      {t('submit')}\n                    </Button>\n                    <Button\n                      type=\"button\"\n                      className=\"text-sm\"\n                      variant=\"ghost\"\n                      size=\"lg\"\n                      onClick={handleCancel}\n                      aria-label={t('cancel')}\n                    >\n                      {t('cancel')}\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderOtpScreen = () => (\n    <OTPVerificationForm\n      factorType={factorType}\n      confirmEnrollment={confirmEnrollment}\n      onError={onError}\n      onSuccess={onSuccess}\n      onClose={onClose}\n      oobCode={contactData.oobCode || ''}\n      contact={contactData.contact || ''}\n      onBack={handleBack}\n    />\n  );\n\n  return phase === ENTER_CONTACT ? renderContactScreen() : renderOtpScreen();\n}\n",
      "type": "registry:component",
      "target": "components/mfa/contact-input-form.tsx"
    },
    {
      "path": "src/components/mfa/delete-factor-confirmation.tsx",
      "content": "import { Button } from '@/components/ui/button';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Separator } from '@/components/ui/separator';\nimport { useTranslator } from '@/hooks';\nimport type { MFAType } from '@auth0-web-ui-components/core';\n\ntype DeleteFactorConfirmationProps = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  factorToDelete: {\n    id: string;\n    type: MFAType;\n  } | null;\n  isDeletingFactor: boolean;\n  onConfirm: (factorId: string) => void;\n  onCancel: () => void;\n};\n\nexport function DeleteFactorConfirmation({\n  open,\n  onOpenChange,\n  factorToDelete,\n  isDeletingFactor,\n  onConfirm,\n  onCancel,\n}: DeleteFactorConfirmationProps) {\n  const { t } = useTranslator('mfa');\n\n  return (\n    <Dialog\n      open={open}\n      onOpenChange={onOpenChange}\n      aria-modal=\"true\"\n      aria-labelledby=\"delete-mfa-title\"\n      aria-describedby=\"delete-mfa-description\"\n    >\n      <DialogContent aria-describedby=\"delete-mfa-description\" className=\"w-[400px] h-[548px]\">\n        <DialogHeader>\n          <DialogTitle id=\"delete-mfa-title\" className=\"text-center text-xl font-medium\">\n            {t('delete_mfa_title')}\n          </DialogTitle>\n          <Separator className=\"my-2\" />\n        </DialogHeader>\n\n        <div className=\"flex flex-col items-center justify-center flex-1 space-y-10\">\n          <p id=\"delete-mfa-description\" className=\"text-center text-sm font-normal\">\n            {t(`delete_mfa_${factorToDelete?.type}_consent`)}\n          </p>\n\n          <div className=\"flex flex-col space-y-3 w-full\">\n            <Button\n              variant=\"destructive\"\n              size=\"lg\"\n              className=\"text-sm\"\n              onClick={() => factorToDelete && onConfirm(factorToDelete.id)}\n              disabled={isDeletingFactor}\n              aria-label={t('confirm')}\n            >\n              {isDeletingFactor ? t('deleting') : t('confirm')}\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"lg\"\n              className=\"text-sm\"\n              onClick={onCancel}\n              disabled={isDeletingFactor}\n              aria-label={t('cancel')}\n            >\n              {t('cancel')}\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/mfa/delete-factor-confirmation.tsx"
    },
    {
      "path": "src/components/mfa/otp-verification-form.tsx",
      "content": "import * as React from 'react';\nimport { useForm } from 'react-hook-form';\nimport {\n  type MFAType,\n  FACTOR_TYPE_EMAIL,\n  FACTOR_TYPE_OTP,\n  FACTOR_TYPE_PUSH_NOTIFICATION,\n  FACTOR_TYPE_TOPT,\n} from '@auth0-web-ui-components/core';\n\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormMessage,\n} from '@/components/ui/form';\nimport { OTPField } from '@/components/ui/otp-field';\n\nimport { useTranslator } from '@/hooks';\nimport { useOtpConfirmation } from '@/hooks/mfa';\nimport { CONFIRM } from '@/lib/mfa-constants';\n\ntype OtpForm = {\n  userOtp: string;\n};\n\ntype OTPVerificationFormProps = {\n  factorType: MFAType;\n  confirmEnrollment: (\n    factor: MFAType,\n    options: { oobCode?: string; userOtpCode?: string },\n  ) => Promise<unknown | null>;\n  onError: (error: Error, stage: typeof CONFIRM) => void;\n  onSuccess: () => void;\n  onClose: () => void;\n  oobCode?: string;\n  contact?: string;\n  onBack?: () => void;\n};\n\n/**\n * Masks sensitive contact information for display purposes.\n *\n * For email addresses:\n * - Shows the first 2 characters of the local part\n * - Masks the remaining characters with asterisks\n * - Preserves the @ symbol and domain unchanged\n *\n * For phone numbers:\n * - Shows the first 3 and last 3 characters\n * - Masks the middle characters with asterisks\n *\n * @param {string} contact - The contact information to mask (email or phone number)\n * @param {MFAType} factorType - The type of MFA factor to determine masking strategy\n * @returns {string} The masked contact information\n *\n * @example\n * // Email masking\n * maskContact('john.doe@example.com', 'email') // Returns 'jo******@example.com'\n *\n * @example\n * // Phone number masking\n * maskContact('1234567890', 'sms') // Returns '123****890'\n */\nconst maskContact = (contact: string, factorType: MFAType): string => {\n  if (!contact) return '';\n\n  if (factorType === FACTOR_TYPE_EMAIL) {\n    const atIndex = contact.indexOf('@');\n    if (atIndex === -1) return contact;\n\n    const localPart = contact.substring(0, atIndex);\n    const domain = contact.substring(atIndex);\n\n    return localPart.length > 2\n      ? `${localPart.slice(0, 2)}${'*'.repeat(localPart.length - 2)}${domain}`\n      : contact;\n  }\n\n  return contact.length > 6\n    ? `${contact.slice(0, 3)}${'*'.repeat(contact.length - 6)}${contact.slice(-3)}`\n    : contact;\n};\n\nexport function OTPVerificationForm({\n  factorType,\n  confirmEnrollment,\n  onError,\n  onSuccess,\n  onClose,\n  oobCode,\n  contact,\n  onBack,\n}: OTPVerificationFormProps) {\n  const { t } = useTranslator('mfa');\n\n  const { onSubmitOtp, loading } = useOtpConfirmation({\n    factorType,\n    confirmEnrollment,\n    onError,\n    onSuccess,\n    onClose,\n  });\n\n  const form = useForm<OtpForm>({\n    mode: 'onChange',\n  });\n\n  const userOtp = form.watch('userOtp');\n  const isOtpValid = userOtp && userOtp.length === 6;\n  const otpInputRef = React.useRef<HTMLInputElement>(null);\n\n  React.useEffect(() => {\n    otpInputRef.current?.focus();\n  }, []);\n\n  const handleSubmit = React.useCallback(\n    async (data: OtpForm) => {\n      await onSubmitOtp(data, oobCode);\n    },\n    [onSubmitOtp, oobCode],\n  );\n\n  const maskedContact = React.useMemo(\n    () => (contact ? maskContact(contact, factorType) : ''),\n    [contact, factorType],\n  );\n\n  return (\n    <div className=\"w-full max-w-sm mx-auto text-center\">\n      <Form {...form}>\n        <form\n          onSubmit={form.handleSubmit(handleSubmit)}\n          autoComplete=\"off\"\n          className=\"space-y-6\"\n          aria-describedby=\"otp-description\"\n        >\n          <p id=\"otp-description\" className=\"font-normal text-center block mx-auto text-sm\">\n            {[FACTOR_TYPE_PUSH_NOTIFICATION, FACTOR_TYPE_TOPT, FACTOR_TYPE_OTP].includes(factorType)\n              ? t('enrollment_form.show_otp.enter_opt_code')\n              : t('enrollment_form.show_otp.enter_verify_code', { verifier: maskedContact })}\n          </p>\n          <FormField\n            control={form.control}\n            name=\"userOtp\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel className=\"text-sm font-normal\" htmlFor=\"otp-input\">\n                  {t('enrollment_form.show_otp.one_time_passcode')}\n                </FormLabel>\n                <FormControl>\n                  <OTPField\n                    id=\"otp-input\"\n                    length={6}\n                    separator={{ character: '-', afterEvery: 3 }}\n                    onChange={field.onChange}\n                    inputRef={otpInputRef}\n                    aria-invalid={Boolean(form.formState.errors.userOtp)}\n                    value={field.value || ''}\n                  />\n                </FormControl>\n                <FormMessage className=\"text-left\" id=\"otp-error\" role=\"alert\" />\n              </FormItem>\n            )}\n          />\n          <div className=\"flex flex-col gap-3 justify-center\">\n            <Button\n              type=\"submit\"\n              className=\"text-sm\"\n              size=\"lg\"\n              disabled={loading || !isOtpValid}\n              aria-label={loading ? t('enrollment_form.show_otp.verifying') : t('submit')}\n            >\n              {loading ? t('enrollment_form.show_otp.verifying') : t('submit')}\n            </Button>\n            <Button\n              type=\"button\"\n              className=\"text-sm\"\n              variant=\"ghost\"\n              size=\"lg\"\n              onClick={onBack}\n              aria-label={t('back')}\n            >\n              {t('back')}\n            </Button>\n          </div>\n        </form>\n      </Form>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/mfa/otp-verification-form.tsx"
    },
    {
      "path": "src/components/mfa/qr-code-enrollment-form.tsx",
      "content": "import * as React from 'react';\nimport QRCode from 'react-qr-code';\nimport { Copy } from 'lucide-react';\n\nimport { type MFAType, type EnrollMfaResponse } from '@auth0-web-ui-components/core';\nimport { Button } from '@/components/ui/button';\nimport { Spinner } from '@/components/ui/spinner';\n\nimport { CONFIRM, QR_PHASE_ENTER_OTP, QR_PHASE_SCAN, ENROLL } from '@/lib/mfa-constants';\n\nimport { useTranslator } from '@/hooks';\nimport { useOtpEnrollment } from '@/hooks/mfa';\n\nimport { OTPVerificationForm } from './otp-verification-form';\n\ntype QRCodeEnrollmentFormProps = {\n  factorType: MFAType;\n  enrollMfa: (factor: MFAType, options: Record<string, string>) => Promise<EnrollMfaResponse>;\n  confirmEnrollment: (\n    factor: MFAType,\n    options: { oobCode?: string; userOtpCode?: string },\n  ) => Promise<unknown | null>;\n  onError: (error: Error, stage: typeof ENROLL | typeof CONFIRM) => void;\n  onSuccess: () => void;\n  onClose: () => void;\n};\n\nconst PHASES = {\n  SCAN: QR_PHASE_SCAN,\n  ENTER_OTP: QR_PHASE_ENTER_OTP,\n} as const;\n\ntype Phase = (typeof PHASES)[keyof typeof PHASES];\n\nexport function QRCodeEnrollmentForm({\n  factorType,\n  enrollMfa,\n  confirmEnrollment,\n  onError,\n  onSuccess,\n  onClose,\n}: QRCodeEnrollmentFormProps) {\n  const [phase, setPhase] = React.useState<Phase>(QR_PHASE_SCAN);\n  const { t } = useTranslator('mfa');\n\n  const { fetchOtpEnrollment, otpData, resetOtpData, loading } = useOtpEnrollment({\n    factorType,\n    enrollMfa,\n    onError,\n    onClose,\n  });\n\n  React.useEffect(() => {\n    fetchOtpEnrollment();\n  }, [phase]);\n\n  const handleContinue = React.useCallback(() => {\n    setPhase(QR_PHASE_ENTER_OTP);\n  }, []);\n\n  const handleBack = React.useCallback(() => {\n    setPhase(QR_PHASE_SCAN);\n    resetOtpData();\n  }, []);\n\n  const handleCopySecret = React.useCallback(async () => {\n    await navigator.clipboard.writeText(otpData?.secret || '');\n  }, [otpData.secret]);\n\n  const renderQrScreen = () => {\n    return (\n      <>\n        {loading ? (\n          <div\n            className=\"absolute inset-0 flex items-center justify-center\"\n            role=\"status\"\n            aria-live=\"polite\"\n          >\n            <Spinner aria-label={t('loading')} />\n          </div>\n        ) : (\n          <div className=\"w-full max-w-sm mx-auto text-center\">\n            <div className=\"mb-6\">\n              <div className=\"flex justify-center items-center mb-6\">\n                <QRCode\n                  size={150}\n                  value={otpData.barcodeUri || ''}\n                  aria-label={t('enrollment_form.show_otp.qr_code_description')}\n                />\n              </div>\n              <p id=\"qr-description\" className=\"font-normal text-center block text-sm\">\n                {t('enrollment_form.show_otp.title')}\n              </p>\n            </div>\n            <div className=\"flex flex-col space-y-3\" aria-describedby=\"qr-description\">\n              <Button\n                type=\"button\"\n                className=\"text-sm\"\n                variant=\"outline\"\n                size=\"lg\"\n                onClick={handleCopySecret}\n                aria-label={t('enrollment_form.show_otp.copy_as_code')}\n              >\n                <Copy className=\"h-4 w-4\" aria-hidden=\"true\" />\n                {t('enrollment_form.show_otp.copy_as_code')}\n              </Button>\n              <div className=\"mt-3\" />\n              <Button\n                type=\"button\"\n                className=\"text-sm\"\n                size=\"lg\"\n                onClick={handleContinue}\n                aria-label={t('continue')}\n              >\n                {t('continue')}\n              </Button>\n              <Button\n                type=\"button\"\n                className=\"text-sm\"\n                variant=\"ghost\"\n                size=\"lg\"\n                onClick={onClose}\n                aria-label={t('cancel')}\n              >\n                {t('cancel')}\n              </Button>\n            </div>\n          </div>\n        )}\n      </>\n    );\n  };\n\n  const renderOtpScreen = () => (\n    <OTPVerificationForm\n      factorType={factorType}\n      confirmEnrollment={confirmEnrollment}\n      onError={onError}\n      onSuccess={onSuccess}\n      onClose={onClose}\n      oobCode={otpData?.oobCode || ''}\n      onBack={handleBack}\n    />\n  );\n\n  return phase === QR_PHASE_SCAN ? renderQrScreen() : renderOtpScreen();\n}\n",
      "type": "registry:component",
      "target": "components/mfa/qr-code-enrollment-form.tsx"
    },
    {
      "path": "src/components/mfa/user-mfa-setup-form.tsx",
      "content": "import * as React from 'react';\nimport {\n  type MFAType,\n  type EnrollMfaResponse,\n  FACTOR_TYPE_EMAIL,\n  FACTOR_TYPE_SMS,\n  FACTOR_TYPE_TOPT,\n  FACTOR_TYPE_PUSH_NOTIFICATION,\n} from '@auth0-web-ui-components/core';\n\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Separator } from '@/components/ui/separator';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\n\nimport { ContactInputForm } from './contact-input-form';\nimport { QRCodeEnrollmentForm } from './qr-code-enrollment-form';\n\nimport {\n  ENTER_QR,\n  ENTER_OTP,\n  ENTER_CONTACT,\n  ENROLL,\n  CONFIRM,\n  QR_PHASE_INSTALLATION,\n} from '@/lib/mfa-constants';\n\nimport { useTranslator } from '@/hooks';\nimport AppleLogo from '@/lib/svgs/apple-logo';\nimport GoogleLogo from '@/lib/svgs/google-logo';\n\ntype UserMFASetupFormProps = {\n  open: boolean;\n  onClose: () => void;\n  factorType: MFAType;\n  enrollMfa: (factor: MFAType, options: Record<string, string>) => Promise<EnrollMfaResponse>;\n  confirmEnrollment: (\n    factor: MFAType,\n    options: { oobCode?: string; userOtpCode?: string },\n  ) => Promise<unknown | null>;\n  onSuccess: () => void;\n  onError: (error: Error, stage: typeof ENROLL | typeof CONFIRM) => void;\n  schemaValidation?: { email?: RegExp; phone?: RegExp };\n};\n\ntype EnrollmentPhase =\n  | typeof ENTER_CONTACT\n  | typeof ENTER_OTP\n  | typeof ENTER_QR\n  | typeof QR_PHASE_INSTALLATION\n  | null;\n\nexport function UserMFASetupForm({\n  open,\n  onClose,\n  factorType,\n  enrollMfa,\n  confirmEnrollment,\n  onSuccess,\n  onError,\n  schemaValidation,\n}: UserMFASetupFormProps) {\n  const { t } = useTranslator('mfa');\n\n  // Initialize phase as null, meaning no UI shown by default\n  const [phase, setPhase] = React.useState<EnrollmentPhase>(null);\n\n  React.useEffect(() => {\n    if (!open) {\n      setPhase(null);\n    }\n  }, [open]);\n\n  React.useEffect(() => {\n    if (!open) return;\n    const phaseMap: Partial<Record<MFAType, EnrollmentPhase>> = {\n      [FACTOR_TYPE_EMAIL]: ENTER_CONTACT,\n      [FACTOR_TYPE_SMS]: ENTER_CONTACT,\n      [FACTOR_TYPE_PUSH_NOTIFICATION]: QR_PHASE_INSTALLATION,\n      [FACTOR_TYPE_TOPT]: ENTER_QR,\n    };\n\n    setPhase(phaseMap[factorType] ?? null);\n  }, [open, factorType]);\n\n  const renderInstallationPhase = () => (\n    <div className=\"w-full max-w-sm mx-auto\">\n      <div className=\"flex flex-col items-center justify-center flex-1 space-y-10\">\n        <p className=\"text-center text-sm font-normal\">\n          {t('enrollment_form.show_otp.install_guardian_description')}\n        </p>\n        <div className=\"flex gap-4 w-full\">\n          <a\n            href=\"https://apps.apple.com/us/app/auth0-guardian/id1093447833\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"flex-1\"\n          >\n            <Card className=\"flex flex-col items-center gap-1 min-w-24 p-6 h-full\">\n              <AppleLogo className=\"w-8 h-8\" />\n              <span className=\"text-sm text-center\">{t('app-store')}</span>\n            </Card>\n          </a>\n          <a\n            href=\"https://play.google.com/store/apps/details?id=com.auth0.guardian\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"flex-1\"\n          >\n            <Card className=\"flex flex-col items-center gap-1 min-w-24 p-6 h-full\">\n              <GoogleLogo className=\"w-8 h-8\" />\n              <span className=\"text-sm text-center\">{t('google-play')}</span>\n            </Card>\n          </a>\n        </div>\n        <div className=\"flex flex-col gap-3 w-full\">\n          <Button type=\"button\" className=\"text-sm\" size=\"lg\" onClick={() => setPhase(ENTER_QR)}>\n            {t('continue')}\n          </Button>\n          <Button type=\"button\" className=\"text-sm\" variant=\"ghost\" size=\"lg\" onClick={onClose}>\n            {t('cancel')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderForm = () => {\n    switch (phase) {\n      case QR_PHASE_INSTALLATION:\n        return renderInstallationPhase();\n      case ENTER_CONTACT:\n        return (\n          <ContactInputForm\n            factorType={factorType}\n            enrollMfa={enrollMfa}\n            confirmEnrollment={confirmEnrollment}\n            onError={onError}\n            onSuccess={onSuccess}\n            onClose={onClose}\n            schemaValidation={schemaValidation}\n          />\n        );\n      case ENTER_QR:\n        return (\n          <QRCodeEnrollmentForm\n            factorType={factorType}\n            enrollMfa={enrollMfa}\n            confirmEnrollment={confirmEnrollment}\n            onError={onError}\n            onSuccess={onSuccess}\n            onClose={onClose}\n          />\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Dialog open={open && Boolean(phase)} onOpenChange={onClose}>\n      <DialogContent aria-describedby=\"mfa-setup-form\" className=\"w-[400px] h-[548px]\">\n        <DialogHeader>\n          <DialogTitle className=\"text-left font-medium text-xl\">\n            {t('enrollment_form.enroll_title')}\n          </DialogTitle>\n          <Separator className=\"my-2\" />\n        </DialogHeader>\n        {renderForm()}\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/mfa/user-mfa-setup-form.tsx"
    },
    {
      "path": "src/components/ui/badge.tsx",
      "content": "import { cva, type VariantProps } from 'class-variance-authority';\nimport * as React from 'react';\nimport { Fragment } from 'react';\nimport { cn } from '@/lib/theme-utils';\n\nconst badgeVariants = cva(\n  'theme-default:shadow-xs box-border inline-flex items-center overflow-clip rounded-2xl border border-transparent font-medium',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground theme-default:border-primary',\n        secondary: 'bg-muted text-muted-foreground theme-default:border-muted-foreground/25',\n        outline: 'border-border',\n        info: 'bg-info text-info-foreground theme-default:border-info-foreground/25',\n        success: 'bg-success theme-default:border-success-foreground/25 text-success-foreground',\n        warning: 'bg-warning theme-default:border-warning-foreground/25 text-warning-foreground',\n        destructive:\n          'bg-destructive theme-default:border-destructive-foreground/25 text-destructive-foreground',\n      },\n      size: {\n        sm: 'px-1.5 py-0.5 text-xs',\n        md: 'px-2 py-1 text-sm',\n        lg: 'px-2.5 py-1.5 text-sm',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'md',\n    },\n  },\n);\n\nfunction Badge({\n  className,\n  variant,\n  size,\n\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> & VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Fragment : 'span';\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant, size }), className)}\n      {...props}\n    />\n  );\n}\n\nexport { Badge, badgeVariants };\n",
      "type": "registry:ui",
      "target": "components/ui/badge.tsx"
    },
    {
      "path": "src/components/ui/button.tsx",
      "content": "'use client';\n\nimport { cva, type VariantProps } from 'class-variance-authority';\nimport * as React from 'react';\nimport { cn } from '@/lib/theme-utils';\n\nconst buttonVariants = cva(\n  \"focus-visible:ring-ring aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive theme-default:active:scale-[0.99] relative box-border inline-flex shrink-0 items-center justify-center gap-2 overflow-hidden text-sm font-medium whitespace-nowrap transition-all duration-150 ease-in-out outline-none focus-visible:ring-4 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      variant: {\n        primary:\n          \"shadow-button-resting hover:shadow-button-hover hover:border-primary/50 border-primary bg-primary text-primary-foreground hover:bg-primary/90 theme-default:before:from-primary-foreground/0 theme-default:before:to-primary-foreground/15 theme-default:before:absolute theme-default:before:top-0 theme-default:before:left-0 theme-default:before:block theme-default:before:h-full theme-default:before:w-full theme-default:before:bg-gradient-to-t theme-default:before:content-[''] border\",\n        outline:\n          \"dark:bg-muted/50 hover:text-accent-foreground shadow-button-outlined-resting hover:shadow-button-outlined-hover hover:border-accent bg-background hover:bg-muted text-primary border-primary/35 theme-default:before:from-primary/5 theme-default:before:to-primary/0 theme-default:before:absolute theme-default:before:top-0 theme-default:before:left-0 theme-default:before:block theme-default:before:h-full theme-default:before:w-full theme-default:before:bg-gradient-to-t theme-default:before:content-[''] border\",\n        ghost: 'hover:bg-muted text-primary bg-transparent',\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-button-destructive-resting hover:shadow-button-destructive-hover border-destructive-border/25 hover:border-destructive-border/50 theme-default:before:to-primary-foreground/50 theme-default:before:absolute theme-default:before:top-0 theme-default:before:left-0 theme-default:before:block theme-default:before:h-full theme-default:before:w-full theme-default:before:bg-gradient-to-t theme-default:before:content-[''] theme-default:border\",\n        link: 'text-foreground underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-10 rounded-2xl px-4 py-2.5 has-[>svg]:px-3',\n        xs: 'h-7 rounded-md px-2 py-1.5 text-xs has-[>svg]:px-2',\n        sm: 'h-8 gap-1.5 rounded-xl px-3 py-2 text-xs has-[>svg]:px-2.5',\n        lg: 'h-12 rounded-3xl px-6 py-3 text-base has-[>svg]:px-4',\n        icon: 'size-7 rounded-xl',\n      },\n    },\n    defaultVariants: {\n      variant: 'primary',\n      size: 'default',\n    },\n  },\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  as?: boolean;\n}\n\nfunction Button({\n  className,\n  variant,\n  size,\n  as,\n  ...props\n}: React.ComponentProps<'button'> & ButtonProps) {\n  const Comp = as ? React.Fragment : 'button';\n\n  return <Comp className={cn('button', buttonVariants({ variant, size }), className)} {...props} />;\n}\n\nexport { Button, buttonVariants };\n",
      "type": "registry:ui",
      "target": "components/ui/button.tsx"
    },
    {
      "path": "src/components/ui/card.tsx",
      "content": "import * as React from 'react';\nimport { cn } from '@/lib/theme-utils';\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground shadow-bevel-2xl flex flex-col gap-6 rounded-4xl py-6',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn('col-start-2 row-span-2 row-start-1 self-start justify-self-end', className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return <div data-slot=\"card-content\" className={cn('px-6', className)} {...props} />;\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  );\n}\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardAction, CardDescription, CardContent };\n",
      "type": "registry:ui",
      "target": "components/ui/card.tsx"
    },
    {
      "path": "src/components/ui/dialog.tsx",
      "content": "'use client';\n\nimport { Button } from '@/components/ui/button';\nimport * as DialogPrimitive from '@radix-ui/react-dialog';\nimport { XIcon } from 'lucide-react';\nimport * as React from 'react';\nimport { cn } from '@/lib/theme-utils';\n\nfunction Dialog({ ...props }: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />;\n}\n\nfunction DialogTrigger({ ...props }: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  const { children, asChild = false, ...elementProps } = props;\n\n  if (asChild && React.isValidElement(children)) {\n    return React.cloneElement(children, {\n      ...(typeof children.props === 'object' ? children.props : {}),\n      ...elementProps,\n    });\n  }\n\n  return (\n    <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" asChild {...props}>\n      <Button {...elementProps} data-slot=\"dialog-trigger\">\n        {children}\n      </Button>\n    </DialogPrimitive.Trigger>\n  );\n}\n\nfunction DialogPortal({ ...props }: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />;\n}\n\nfunction DialogClose({ ...props }: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  const { children } = props;\n\n  return (\n    <DialogPrimitive.Close data-slot=\"dialog-close\" asChild>\n      <Button variant=\"outline\" data-slot=\"dialog-close\">\n        {children}\n      </Button>\n    </DialogPrimitive.Close>\n  );\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 duration-200 ease-in-out',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean;\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 shadow-bevel-2xl rounded-5xl fixed top-[50%] left-[50%] z-[999] grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 p-6 duration-200 ease-in-out sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            asChild\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background absolute top-4 right-4\"\n          >\n            <Button variant=\"ghost\" size=\"icon\">\n              <XIcon />\n              <span className=\"sr-only\">Close</span>\n            </Button>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  );\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  );\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn('flex flex-col-reverse gap-2 sm:flex-row sm:justify-end', className)}\n      {...props}\n    />\n  );\n}\n\nfunction DialogTitle({ className, ...props }: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  );\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n};\n",
      "type": "registry:ui",
      "target": "components/ui/dialog.tsx"
    },
    {
      "path": "src/components/ui/list.tsx",
      "content": "import * as React from 'react';\nimport { cn } from '@/lib/theme-utils';\n\nexport interface ListProps extends React.HTMLAttributes<HTMLUListElement> {\n  variant?: 'bullet' | 'number' | 'icon' | 'plain';\n  spacing?: 'tight' | 'default' | 'relaxed';\n  iconPosition?: 'start' | 'end';\n}\n\nexport interface ListItemProps extends React.LiHTMLAttributes<HTMLLIElement> {\n  icon?: React.ReactNode;\n  description?: string;\n  info?: React.ReactNode;\n}\n\nconst ListItem = React.forwardRef<HTMLLIElement, ListItemProps>(\n  ({ className, children, icon, description, info, ...props }, ref) => {\n    return (\n      <li ref={ref} className={cn('flex items-start gap-2', className)} {...props}>\n        <div className=\"flex min-w-0 gap-2 flex-1\">\n          {icon && <div className=\"text-muted-foreground mt-1 shrink-0\">{icon}</div>}\n          <div className=\"min-w-0 flex-1\">\n            <div className=\"text-primary text-sm\">{children}</div>\n            {description && <p className=\"text-muted-foreground text-sm\">{description}</p>}\n          </div>\n        </div>\n        {info && <div className=\"shrink-0\">{info}</div>}\n      </li>\n    );\n  },\n);\nListItem.displayName = 'ListItem';\n\nconst List = React.forwardRef<HTMLUListElement, ListProps>(\n  ({ className, children, variant = 'plain', spacing = 'default', ...props }, ref) => {\n    return (\n      <ul\n        ref={ref}\n        className={cn(\n          'text-sm',\n\n          spacing === 'tight' && 'space-y-2',\n          spacing === 'default' && 'space-y-3',\n          spacing === 'relaxed' && 'space-y-4',\n\n          variant === 'bullet' && 'list-inside list-disc',\n          variant === 'number' && 'list-inside list-decimal',\n          variant === 'plain' && 'divide-border list-none divide-y',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n      </ul>\n    );\n  },\n);\nList.displayName = 'List';\n\nexport { List, ListItem };\n",
      "type": "registry:ui",
      "target": "components/ui/list.tsx"
    },
    {
      "path": "src/components/ui/otp-field.tsx",
      "content": "'use client';\n\nimport { TextField } from '@/components/ui/text-field';\nimport React, { ClipboardEvent, KeyboardEvent, useRef, useState } from 'react';\nimport { cn } from '@/lib/theme-utils';\n\nexport interface OTPFieldProps {\n  length?: number;\n  className?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  onChange?: (value: string) => void;\n  autoSubmit?: (value: string) => void;\n  separator?: {\n    character?: string;\n    afterEvery?: number;\n  };\n  id?: string;\n  value?: string;\n  name?: string;\n  inputRef?: React.Ref<HTMLInputElement>;\n}\n\nfunction OTPField({\n  length = 6,\n  placeholder,\n  disabled,\n  className,\n  onChange,\n  autoSubmit,\n  separator,\n  id,\n  value,\n  name,\n  inputRef,\n}: OTPFieldProps) {\n  const [internalOtp, setInternalOtp] = useState<string[]>(new Array(length).fill(''));\n  const inputRefs = useRef<(HTMLInputElement | null)[]>([]);\n\n  // Controlled vs uncontrolled logic\n  const isControlled = value !== undefined;\n  const otpValue = value || '';\n  const otp = isControlled ? Array.from({ length }, (_, i) => otpValue[i] || '') : internalOtp;\n\n  const setOtp = (newOtp: string[]) => {\n    if (!isControlled) {\n      setInternalOtp(newOtp);\n    }\n  };\n\n  const handleChange = (element: HTMLInputElement, index: number) => {\n    const value = element.value;\n    if (isNaN(Number(value))) return;\n\n    const newOtp = [...otp];\n    newOtp[index] = value.substring(value.length - 1);\n    setOtp(newOtp);\n\n    const otpValue = newOtp.join('');\n    onChange?.(otpValue);\n\n    if (otpValue.length === length && autoSubmit) {\n      autoSubmit(otpValue);\n    }\n\n    if (value && index < length - 1) {\n      inputRefs.current[index + 1]?.focus();\n    }\n  };\n\n  const handleKeyDown = (e: KeyboardEvent<HTMLInputElement>, index: number) => {\n    if ((e.key === 'Delete' || e.key === 'Backspace') && (e.ctrlKey || e.metaKey)) {\n      e.preventDefault();\n      const newOtp = new Array(length).fill('');\n      setOtp(newOtp);\n      onChange?.('');\n      inputRefs.current[0]?.focus();\n      return;\n    }\n\n    if (e.key === 'ArrowLeft') {\n      e.preventDefault();\n      if (index > 0) {\n        inputRefs.current[index - 1]?.focus();\n      }\n      return;\n    }\n\n    if (e.key === 'ArrowRight') {\n      e.preventDefault();\n      if (index < length - 1) {\n        inputRefs.current[index + 1]?.focus();\n      }\n      return;\n    }\n\n    if (e.key === 'Home') {\n      e.preventDefault();\n      inputRefs.current[0]?.focus();\n      return;\n    }\n\n    if (e.key === 'End') {\n      e.preventDefault();\n      inputRefs.current[length - 1]?.focus();\n      return;\n    }\n\n    if (e.key === 'Backspace') {\n      if (!otp[index] && index > 0) {\n        const newOtp = [...otp];\n        newOtp[index - 1] = '';\n        setOtp(newOtp);\n        onChange?.(newOtp.join(''));\n        inputRefs.current[index - 1]?.focus();\n      }\n      return;\n    }\n\n    if (e.key === 'Delete') {\n      if (otp[index]) {\n        const newOtp = [...otp];\n        newOtp[index] = '';\n        setOtp(newOtp);\n        onChange?.(newOtp.join(''));\n      } else if (index < length - 1) {\n        const newOtp = [...otp];\n        newOtp[index + 1] = '';\n        setOtp(newOtp);\n        onChange?.(newOtp.join(''));\n      }\n      return;\n    }\n\n    if (e.key === ' ') {\n      e.preventDefault();\n      const nextEmptyIndex = otp.findIndex((digit, i) => i > index && !digit);\n      if (nextEmptyIndex !== -1) {\n        inputRefs.current[nextEmptyIndex]?.focus();\n      } else if (index < length - 1) {\n        inputRefs.current[index + 1]?.focus();\n      }\n      return;\n    }\n  };\n\n  const handlePaste = (e: ClipboardEvent<HTMLInputElement>, startIndex: number) => {\n    e.preventDefault();\n    const pasteData = e.clipboardData.getData('text').replace(/[^0-9]/g, '');\n\n    if (!pasteData) return;\n\n    const newOtp = [...otp];\n    const availableSlots = length - startIndex;\n    const digitsToPaste = pasteData.slice(0, availableSlots);\n\n    for (let i = startIndex; i < Math.min(startIndex + digitsToPaste.length, length); i++) {\n      newOtp[i] = '';\n    }\n\n    for (let i = 0; i < digitsToPaste.length && startIndex + i < length; i++) {\n      newOtp[startIndex + i] = digitsToPaste[i];\n    }\n\n    setOtp(newOtp);\n    const otpValue = newOtp.join('');\n    onChange?.(otpValue);\n\n    if (otpValue.length === length && autoSubmit) {\n      autoSubmit(otpValue);\n    }\n\n    const nextFocusIndex = Math.min(startIndex + digitsToPaste.length, length - 1);\n    setTimeout(() => {\n      inputRefs.current[nextFocusIndex]?.focus();\n    }, 0);\n  };\n\n  return (\n    <div className={cn('flex w-full items-center gap-2', className)}>\n      {otp.map((digit, index) => (\n        <React.Fragment key={index}>\n          <TextField\n            ref={(el) => {\n              inputRefs.current[index] = el as HTMLInputElement;\n              if (index === 0 && inputRef) {\n                if (typeof inputRef === 'function') {\n                  inputRef(el as HTMLInputElement);\n                } else {\n                  inputRef.current = el as HTMLInputElement;\n                }\n              }\n            }}\n            type=\"text\"\n            inputMode=\"numeric\"\n            maxLength={1}\n            value={digit}\n            placeholder={placeholder}\n            disabled={disabled}\n            className=\"flex-1 text-xl font-semibold *:text-center has-[input]:text-center\"\n            onChange={(e) => handleChange(e.target, index)}\n            onKeyDown={(e) => handleKeyDown(e, index)}\n            onPaste={(e) => handlePaste(e, index)}\n            // Apply the id and name only to the first input for label association and form submission\n            id={index === 0 ? id : undefined}\n            name={index === 0 ? name : undefined}\n          />\n          {separator?.afterEvery &&\n            (index + 1) % separator.afterEvery === 0 &&\n            index < length - 1 && (\n              <span className=\"text-muted-foreground text-2xl font-semibold\">\n                {separator.character || '-'}\n              </span>\n            )}\n        </React.Fragment>\n      ))}\n    </div>\n  );\n}\n\nexport { OTPField };\n",
      "type": "registry:ui",
      "target": "components/ui/otp-field.tsx"
    },
    {
      "path": "src/components/ui/popover.tsx",
      "content": "'use client';\n\nimport { createPortal } from 'react-dom';\nimport * as React from 'react';\nimport { cn } from '@/lib/theme-utils';\n\ninterface PopoverContextValue {\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  triggerRef: React.RefObject<HTMLElement | null>;\n  contentRef: React.RefObject<HTMLDivElement | null>;\n  triggerRect: DOMRect | null;\n}\n\nconst PopoverContext = React.createContext<PopoverContextValue | null>(null);\n\nconst usePopoverContext = () => {\n  const context = React.useContext(PopoverContext);\n  if (!context) {\n    throw new Error('Popover components must be used within a Popover');\n  }\n  return context;\n};\n\ninterface PopoverProps {\n  children: React.ReactNode;\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n}\n\nfunction Popover({ children, open: controlledOpen, onOpenChange }: PopoverProps) {\n  const [uncontrolledOpen, setUncontrolledOpen] = React.useState(false);\n  const open = controlledOpen ?? uncontrolledOpen;\n  const triggerRef = React.useRef<HTMLElement>(null);\n  const contentRef = React.useRef<HTMLDivElement>(null);\n  const [triggerRect, setTriggerRect] = React.useState<DOMRect | null>(null);\n\n  const setOpen = React.useCallback(\n    (newOpen: boolean) => {\n      if (newOpen && triggerRef.current) {\n        setTriggerRect(triggerRef.current.getBoundingClientRect());\n      }\n      setUncontrolledOpen(newOpen);\n      onOpenChange?.(newOpen);\n    },\n    [onOpenChange],\n  );\n\n  React.useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        !triggerRef.current?.contains(event.target as Node) &&\n        !contentRef.current?.contains(event.target as Node)\n      ) {\n        setOpen(false);\n      }\n    };\n\n    const handleEscape = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        setOpen(false);\n      }\n    };\n\n    if (open) {\n      document.addEventListener('mousedown', handleClickOutside);\n      document.addEventListener('keydown', handleEscape);\n      // Prevent background scrolling when popover is open\n      document.body.style.overflow = 'hidden';\n\n      return () => {\n        document.removeEventListener('mousedown', handleClickOutside);\n        document.removeEventListener('keydown', handleEscape);\n        // Restore scrolling when popover is closed\n        document.body.style.overflow = '';\n      };\n    }\n  }, [open, setOpen]);\n\n  const contextValue: PopoverContextValue = {\n    open,\n    setOpen,\n    triggerRef,\n    contentRef,\n    triggerRect,\n  };\n\n  return (\n    <PopoverContext.Provider value={contextValue} data-slot=\"popover\">\n      {children}\n    </PopoverContext.Provider>\n  );\n}\n\ninterface PopoverTriggerProps\n  extends Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, 'onClick'> {\n  asChild?: boolean;\n  onClick?: (e: React.MouseEvent<HTMLElement>) => void;\n}\n\nfunction PopoverTrigger({ className, onClick, asChild, children, ...props }: PopoverTriggerProps) {\n  const { open, setOpen, triggerRef } = usePopoverContext();\n\n  const handleClick = (e: React.MouseEvent<HTMLElement>) => {\n    onClick?.(e as React.MouseEvent<HTMLButtonElement>);\n    setOpen(!open);\n  };\n\n  const isChildButton =\n    React.isValidElement(children) &&\n    (children.type === 'button' ||\n      (typeof children.type === 'function' &&\n        (children.type.name === 'Button' ||\n          ('displayName' in children.type && children.type.displayName === 'Button') ||\n          children.type.name?.toLowerCase().includes('button'))) ||\n      (React.isValidElement(children) &&\n        children.props &&\n        typeof children.props === 'object' &&\n        'role' in children.props &&\n        children.props.role === 'button') ||\n      (children.props &&\n        typeof children.props === 'object' &&\n        'type' in children.props &&\n        children.props.type === 'button'));\n\n  const shouldUseAsChild = asChild || isChildButton;\n\n  if (shouldUseAsChild) {\n    if (!React.isValidElement(children)) {\n      throw new Error('PopoverTrigger: asChild requires a valid React element as child');\n    }\n\n    return React.cloneElement(children as React.ReactElement, {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      ref: triggerRef as React.Ref<HTMLElement | null> | undefined,\n      'data-slot': 'popover-trigger',\n      'data-state': open ? 'open' : 'closed',\n      onClick: handleClick,\n      className: cn(\n        React.isValidElement(children) &&\n          children.props &&\n          typeof children.props === 'object' &&\n          'className' in children.props\n          ? (children.props as React.HTMLAttributes<HTMLElement>).className\n          : undefined,\n      ),\n    });\n  }\n\n  return (\n    <button\n      ref={triggerRef as React.RefObject<HTMLButtonElement>}\n      data-slot=\"popover-trigger\"\n      data-state={open ? 'open' : 'closed'}\n      className={cn('inline-flex', className)}\n      onClick={handleClick}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n}\n\ninterface PopoverContentProps extends React.HTMLAttributes<HTMLDivElement> {\n  align?: 'start' | 'center' | 'end';\n  side?: 'top' | 'right' | 'bottom' | 'left';\n  sideOffset?: number;\n}\n\nfunction PopoverContent({\n  children,\n  className,\n  align = 'center',\n  side = 'bottom',\n  sideOffset = 4,\n  ...props\n}: PopoverContentProps) {\n  const { open, contentRef, triggerRect } = usePopoverContext();\n\n  React.useEffect(() => {\n    if (open && contentRef.current) {\n      const focusableElements = contentRef.current.querySelectorAll(\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])',\n      );\n\n      if (focusableElements.length > 0) {\n        (focusableElements[0] as HTMLElement).focus();\n      } else {\n        contentRef.current.focus();\n      }\n    }\n  }, [open, contentRef]);\n\n  if (!open || !triggerRect) return null;\n\n  const { top, left, width, height } = triggerRect;\n\n  const cssProps = {\n    '--trigger-top': `${top}px`,\n    '--trigger-left': `${left}px`,\n    '--trigger-width': `${width}px`,\n    '--trigger-height': `${height}px`,\n    '--side-offset': `${sideOffset}px`,\n  } as React.CSSProperties;\n\n  const getPositionClasses = () => {\n    const baseClasses = 'fixed z-50';\n\n    const sideClasses = {\n      top: 'bottom-[calc(100vh-var(--trigger-top)+var(--side-offset))]',\n      bottom: 'top-[calc(var(--trigger-top)+var(--trigger-height)+var(--side-offset))]',\n      left: 'right-[calc(100vw-var(--trigger-left)+var(--side-offset))] top-[var(--trigger-top)]',\n      right:\n        'left-[calc(var(--trigger-left)+var(--trigger-width)+var(--side-offset))] top-[var(--trigger-top)]',\n    };\n\n    const alignClasses = {\n      top: {\n        start: 'left-[var(--trigger-left)]',\n        center: 'left-[calc(var(--trigger-left)+var(--trigger-width)/2)] -translate-x-1/2',\n        end: 'right-[calc(100vw-var(--trigger-left)-var(--trigger-width))]',\n      },\n      bottom: {\n        start: 'left-[var(--trigger-left)]',\n        center: 'left-[calc(var(--trigger-left)+var(--trigger-width)/2)] -translate-x-1/2',\n        end: 'right-[calc(100vw-var(--trigger-left)-var(--trigger-width))]',\n      },\n      left: {\n        start: 'top-[var(--trigger-top)]',\n        center: 'top-[calc(var(--trigger-top)+var(--trigger-height)/2)] -translate-y-1/2',\n        end: 'bottom-[calc(100vh-var(--trigger-top)-var(--trigger-height))]',\n      },\n      right: {\n        start: 'top-[var(--trigger-top)]',\n        center: 'top-[calc(var(--trigger-top)+var(--trigger-height)/2)] -translate-y-1/2',\n        end: 'bottom-[calc(100vh-var(--trigger-top)-var(--trigger-height))]',\n      },\n    };\n\n    return `${baseClasses} ${sideClasses[side]} ${alignClasses[side][align]}`;\n  };\n\n  const getOriginClasses = () => {\n    const originMap = {\n      top: {\n        start: 'origin-bottom-left',\n        center: 'origin-bottom',\n        end: 'origin-bottom-right',\n      },\n      bottom: {\n        start: 'origin-top-left',\n        center: 'origin-top',\n        end: 'origin-top-right',\n      },\n      left: {\n        start: 'origin-top-right',\n        center: 'origin-right',\n        end: 'origin-bottom-right',\n      },\n      right: {\n        start: 'origin-top-left',\n        center: 'origin-left',\n        end: 'origin-bottom-left',\n      },\n    };\n\n    return originMap[side][align];\n  };\n\n  const content = (\n    <div\n      ref={contentRef}\n      data-slot=\"popover-content\"\n      data-state={open ? 'open' : 'closed'}\n      data-side={side}\n      data-align={align}\n      tabIndex={-1}\n      className={cn(\n        'bg-popover text-popover-foreground animate-in fade-in-0 zoom-in-95 shadow-bevel-xl data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 w-72 overflow-hidden rounded-3xl ring-0 outline-hidden duration-150 ease-in-out outline-none focus:outline-none',\n        getPositionClasses(),\n        getOriginClasses(),\n        className,\n      )}\n      style={cssProps}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n\n  return createPortal(content, document.body);\n}\n\nfunction PopoverAnchor({ ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return <div data-slot=\"popover-anchor\" {...props} />;\n}\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor };\n",
      "type": "registry:ui",
      "target": "components/ui/popover.tsx"
    },
    {
      "path": "src/components/ui/separator.tsx",
      "content": "import * as React from 'react';\nimport { cn } from '@/lib/theme-utils';\n\nfunction Separator({\n  className,\n  orientation = 'horizontal',\n  decorative = true,\n  ...props\n}: React.ComponentProps<'hr'> & { orientation?: 'horizontal' | 'vertical'; decorative?: boolean }) {\n  return (\n    <div\n      data-slot=\"separator\"\n      data-orientation={orientation}\n      role={decorative ? 'none' : 'separator'}\n      className={cn(\n        'bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Separator };\n",
      "type": "registry:ui",
      "target": "components/ui/separator.tsx"
    },
    {
      "path": "src/components/ui/sonner.tsx",
      "content": "'use client';\n\nimport * as React from 'react';\nimport { useTheme } from 'next-themes';\nimport { Toaster as Sonner, ToasterProps } from 'sonner';\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = 'system' } = useTheme();\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps['theme']}\n      className=\"toaster group\"\n      style={\n        {\n          '--normal-bg': 'var(--popover)',\n          '--normal-text': 'var(--popover-foreground)',\n          '--normal-border': 'var(--border)',\n        } as React.CSSProperties\n      }\n      {...props}\n    />\n  );\n};\n\nexport { Toaster };\n",
      "type": "registry:ui",
      "target": "components/ui/sonner.tsx"
    },
    {
      "path": "src/components/ui/spinner.tsx",
      "content": "import { cva, VariantProps } from 'class-variance-authority';\nimport * as React from 'react';\nimport { cn } from '@/lib/theme-utils';\n\nconst spinnerVariants = cva(\n  'text-surface inline-block h-8 w-8 rounded-full duration-[5000] ease-linear',\n  {\n    variants: {\n      variant: {\n        dots: 'border-primary animate-[spin_5s_linear_infinite] border-6 border-dotted',\n        pulse: 'bg-primary animate-pulse',\n        solid: 'border-primary animate-spin border-2 border-e-transparent',\n      },\n      size: {\n        sm: 'size-4',\n        md: 'size-8',\n        lg: 'size-12',\n      },\n    },\n    defaultVariants: {\n      variant: 'solid',\n      size: 'md',\n    },\n  },\n);\n\nexport interface SpinnerProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof spinnerVariants> {}\n\nexport function Spinner({ variant, size, className, ...props }: SpinnerProps) {\n  return (\n    <div className={cn(spinnerVariants({ variant, size }), className)} {...props}>\n      <span className=\"sr-only\">Loading...</span>\n    </div>\n  );\n}\n",
      "type": "registry:ui",
      "target": "components/ui/spinner.tsx"
    },
    {
      "path": "src/components/ui/text-field.tsx",
      "content": "import { cva, VariantProps } from 'class-variance-authority';\nimport * as React from 'react';\nimport { cn } from '@/lib/theme-utils';\n\nconst textFieldVariants = cva(\n  \"bg-input aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive theme-default:active:scale-[0.99] relative box-border inline-flex w-full shrink-0 cursor-text items-center justify-center gap-2 overflow-hidden rounded-2xl text-sm transition-[color,box-shadow] duration-150 ease-in-out outline-none disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      variant: {\n        default:\n          'border-border/50 text-input-foreground shadow-input-resting hover:shadow-input-hover hover:border-primary/25 focus-within:border-border focus-within:ring-primary/15 focus-within:ring-4',\n        error:\n          'border-destructive-border/50 text-destructive-foreground shadow-input-destructive-resting hover:shadow-input-destructive-hover hover:border-destructive-border/25 focus-within:ring-destructive-border/15 focus-within:ring-4',\n      },\n      size: {\n        default: 'h-10',\n        sm: 'h-9',\n        lg: 'h-11',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n);\n\nexport interface TextFieldProps extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'size'> {\n  error?: boolean;\n  helperText?: string;\n  size?: VariantProps<typeof textFieldVariants>['size'];\n  variant?: VariantProps<typeof textFieldVariants>['variant'];\n  startAdornment?: React.ReactNode;\n  endAdornment?: React.ReactNode;\n}\n\nconst TextField = React.forwardRef<HTMLInputElement, TextFieldProps>(\n  (\n    { className, variant, size, error, helperText, startAdornment, endAdornment, ...props },\n    ref,\n  ) => {\n    const isDisabled = props.disabled;\n\n    const WrapperComponent = props.id ? 'div' : 'label';\n\n    return (\n      <div className=\"flex w-full flex-col\">\n        <WrapperComponent\n          className={cn(\n            textFieldVariants({ variant: error ? 'error' : variant, size }),\n            'group items-center gap-0.5',\n            isDisabled &&\n              'bg-input-muted text-input-muted-foreground cursor-not-allowed opacity-50',\n            isDisabled && variant === 'default' && 'bg-input-muted',\n            startAdornment && 'pl-[5px]',\n            endAdornment && 'pr-[5px]',\n            className,\n          )}\n        >\n          {startAdornment && (\n            <div className=\"[&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\">\n              {startAdornment}\n            </div>\n          )}\n          <input\n            className={cn(\n              'w-full flex-1 bg-transparent px-3 py-2 outline-none file:border-0 file:bg-transparent file:text-sm file:font-medium',\n              isDisabled &&\n                'bg-input-muted text-input-muted-foreground cursor-not-allowed opacity-50',\n              startAdornment && 'pl-0',\n              endAdornment && 'pr-0',\n              size === 'default' && 'h-10',\n              size === 'sm' && 'h-9',\n              size === 'lg' && 'h-11',\n            )}\n            ref={ref}\n            {...props}\n          />\n          {endAdornment && (\n            <div className=\"[&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\">\n              {endAdornment}\n            </div>\n          )}\n        </WrapperComponent>\n        {helperText && (\n          <p\n            className={cn(\n              'mt-1.5 px-2 text-xs',\n              error ? 'text-destructive-foreground' : 'text-muted-foreground',\n            )}\n          >\n            {helperText}\n          </p>\n        )}\n      </div>\n    );\n  },\n);\n\nTextField.displayName = 'TextField';\n\nexport { TextField, textFieldVariants };\n",
      "type": "registry:ui",
      "target": "components/ui/text-field.tsx"
    },
    {
      "path": "src/hoc/index.ts",
      "content": "export { withCoreClient } from './with-core-client';\n",
      "type": "registry:file",
      "target": "hoc/index.ts"
    },
    {
      "path": "src/hooks/index.ts",
      "content": "export { useComponentConfig, Auth0ComponentConfigContext } from './use-config';\nexport { useCoreClient, CoreClientContext } from './use-core-client';\nexport { useTranslator } from './use-translator';\nexport { useContactEnrollment, useOtpConfirmation, useOtpEnrollment, useMFA } from './mfa';\nexport { useTheme } from './use-theme';\nexport { useCoreClientInitialization } from './use-core-client-initialization';\n",
      "type": "registry:hook",
      "target": "hooks/index.ts"
    },
    {
      "path": "src/hooks/mfa/index.ts",
      "content": "export { useContactEnrollment } from './use-contact-enrollment';\nexport { useOtpConfirmation } from './use-otp-confirmation';\nexport { useOtpEnrollment } from './use-otp-enrollment';\nexport { useMFA } from './use-mfa';\n",
      "type": "registry:hook",
      "target": "hooks/mfa/index.ts"
    },
    {
      "path": "src/hooks/mfa/use-contact-enrollment.ts",
      "content": "import { useState, useCallback } from 'react';\nimport {\n  FACTOR_TYPE_EMAIL,\n  FACTOR_TYPE_SMS,\n  normalizeError,\n  type MFAType,\n  type EnrollMfaResponse,\n} from '@auth0-web-ui-components/core';\nimport { ENROLL } from '@/lib/mfa-constants';\nimport { useTranslator } from '@/hooks';\n\ntype ContactForm = {\n  contact: string;\n};\n\ntype UseContactEnrollmentProps = {\n  factorType: MFAType;\n  enrollMfa: (factor: MFAType, options: Record<string, string>) => Promise<EnrollMfaResponse>;\n  onError: (error: Error, stage: typeof ENROLL) => void;\n};\n\nexport function useContactEnrollment({\n  factorType,\n  enrollMfa,\n  onError,\n}: UseContactEnrollmentProps) {\n  const { t } = useTranslator('mfa');\n  const [loading, setLoading] = useState(false);\n  const [contactData, setContactData] = useState<{\n    contact: string | null;\n    oobCode: string | null;\n  }>({\n    contact: null,\n    oobCode: null,\n  });\n\n  const onSubmitContact = useCallback(\n    async (data: ContactForm) => {\n      if (loading) return;\n      setLoading(true);\n      try {\n        const options: Record<string, string> =\n          factorType === FACTOR_TYPE_EMAIL\n            ? { email: data.contact }\n            : factorType === FACTOR_TYPE_SMS\n              ? { phone_number: data.contact }\n              : {};\n\n        const response = await enrollMfa(factorType, options);\n\n        if (response?.oob_code) {\n          setContactData({\n            contact: data.contact,\n            oobCode: response?.oob_code,\n          });\n        }\n      } catch (error) {\n        const normalizedError = normalizeError(error, {\n          resolver: (code) =>\n            t(\n              `errors.${factorType}.${code}`,\n              {},\n              'An unexpected error occurred during enrollment.',\n            ),\n        });\n        onError(normalizedError, ENROLL);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [loading, factorType, enrollMfa, onError, t],\n  );\n\n  return { onSubmitContact, loading, contactData, setContactData };\n}\n",
      "type": "registry:hook",
      "target": "hooks/mfa/use-contact-enrollment.ts"
    },
    {
      "path": "src/hooks/mfa/use-mfa.ts",
      "content": "import { useCallback } from 'react';\nimport { useCoreClient } from '../use-core-client';\nimport type {\n  MFAType,\n  EnrollOptions,\n  ConfirmEnrollmentOptions,\n} from '@auth0-web-ui-components/core';\nimport { UseMFAResult } from '@/types';\n\n/**\n * A custom React hook for managing all Multi-Factor Authentication (MFA) operations.\n * @returns {UseMfaResult} An object containing the functions to manage MFA factors.\n */\nexport function useMFA(): UseMFAResult {\n  const { coreClient } = useCoreClient();\n\n  if (!coreClient) {\n    throw new Error(\n      'useMFA must be used within Auth0ComponentProvider with initialized CoreClient',\n    );\n  }\n\n  const fetchFactors = useCallback(\n    (onlyActive = false) => coreClient.authenticationApiService.mfa.fetchFactors(onlyActive),\n    [coreClient],\n  );\n\n  const enrollMfa = useCallback(\n    (factorName: MFAType, options: EnrollOptions = {}) =>\n      coreClient.authenticationApiService.mfa.enrollFactor(factorName, options),\n    [coreClient],\n  );\n\n  const deleteMfa = useCallback(\n    (authenticatorId: string) =>\n      coreClient.authenticationApiService.mfa.deleteFactor(authenticatorId),\n    [coreClient],\n  );\n\n  const confirmEnrollment = useCallback(\n    (factorName: MFAType, options: ConfirmEnrollmentOptions) =>\n      coreClient.authenticationApiService.mfa.confirmEnrollment(factorName, options),\n    [coreClient],\n  );\n\n  return {\n    fetchFactors,\n    enrollMfa,\n    deleteMfa,\n    confirmEnrollment,\n  };\n}\n",
      "type": "registry:hook",
      "target": "hooks/mfa/use-mfa.ts"
    },
    {
      "path": "src/hooks/mfa/use-otp-confirmation.ts",
      "content": "import { useState, useCallback } from 'react';\nimport { normalizeError, type MFAType } from '@auth0-web-ui-components/core';\nimport { CONFIRM } from '@/lib/mfa-constants';\nimport { useTranslator } from '@/hooks';\n\ntype OtpForm = {\n  userOtp: string;\n};\n\ntype UseOtpConfirmationProps = {\n  factorType: MFAType;\n  confirmEnrollment: (\n    factor: MFAType,\n    options: { oobCode?: string; userOtpCode?: string },\n  ) => Promise<unknown | null>;\n  onError: (error: Error, stage: typeof CONFIRM) => void;\n  onSuccess: () => void;\n  onClose: () => void;\n};\n\nexport function useOtpConfirmation({\n  factorType,\n  confirmEnrollment,\n  onError,\n  onSuccess,\n  onClose,\n}: UseOtpConfirmationProps) {\n  const { t } = useTranslator('mfa');\n  const [loading, setLoading] = useState(false);\n\n  const onSubmitOtp = useCallback(\n    async (data: OtpForm, oobCode?: string) => {\n      if (loading) return;\n      setLoading(true);\n\n      try {\n        const options = {\n          oobCode,\n          userOtpCode: data.userOtp,\n        };\n\n        const response = await confirmEnrollment(factorType, options);\n        if (response) {\n          onSuccess();\n          onClose();\n        }\n      } catch (err) {\n        const normalizedError = normalizeError(err, {\n          resolver: (code) =>\n            t(\n              `errors.${factorType}.${code}`,\n              {},\n              'An unexpected error occurred during enrollment.',\n            ),\n        });\n        onError(normalizedError, CONFIRM);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [loading, factorType, confirmEnrollment, onError, onSuccess, onClose, t],\n  );\n\n  return { onSubmitOtp, loading };\n}\n",
      "type": "registry:hook",
      "target": "hooks/mfa/use-otp-confirmation.ts"
    },
    {
      "path": "src/hooks/mfa/use-otp-enrollment.ts",
      "content": "import { useState, useCallback } from 'react';\nimport {\n  normalizeError,\n  type MFAType,\n  type EnrollMfaResponse,\n} from '@auth0-web-ui-components/core';\nimport { ENROLL } from '@/lib/mfa-constants';\nimport { useTranslator } from '@/hooks';\n\ntype UseOtpEnrollmentProps = {\n  factorType: MFAType;\n  enrollMfa: (factor: MFAType, options: Record<string, string>) => Promise<EnrollMfaResponse>;\n  onError: (error: Error, stage: typeof ENROLL) => void;\n  onClose: () => void;\n};\n\nexport function useOtpEnrollment({\n  factorType,\n  enrollMfa,\n  onError,\n  onClose,\n}: UseOtpEnrollmentProps) {\n  const { t } = useTranslator('mfa');\n  const [loading, setLoading] = useState(false);\n  const [otpData, setOtpData] = useState<{\n    secret: string | null;\n    barcodeUri: string | null;\n    recoveryCodes: string[];\n    oobCode: string | null;\n  }>({\n    secret: null,\n    barcodeUri: null,\n    recoveryCodes: [],\n    oobCode: null,\n  });\n\n  const fetchOtpEnrollment = useCallback(async () => {\n    if (loading) return;\n    setLoading(true);\n    try {\n      const response = await enrollMfa(factorType, {});\n      setOtpData({\n        secret: response.secret ?? null,\n        barcodeUri: response.barcode_uri ?? null,\n        recoveryCodes: response.recovery_codes || [],\n        oobCode: response.oob_code ?? null,\n      });\n    } catch (error) {\n      const normalizedError = normalizeError(error, {\n        resolver: (code) =>\n          t(`errors.${factorType}.${code}`, {}, 'An unexpected error occurred during enrollment.'),\n      });\n      onError(normalizedError, ENROLL);\n      onClose();\n    } finally {\n      setLoading(false);\n    }\n  }, [loading, factorType, enrollMfa, onError, onClose, t]);\n\n  const resetOtpData = useCallback(() => {\n    setOtpData({ secret: null, barcodeUri: null, recoveryCodes: [], oobCode: null });\n    setLoading(false);\n  }, []);\n\n  const updateOtpData = useCallback(\n    (newData: {\n      secret: string | null;\n      barcodeUri: string | null;\n      recoveryCodes: string[];\n      oobCode: string | null;\n    }) => {\n      setOtpData(newData);\n    },\n    [],\n  );\n\n  return {\n    fetchOtpEnrollment,\n    otpData,\n    resetOtpData,\n    updateOtpData,\n    loading,\n  };\n}\n",
      "type": "registry:hook",
      "target": "hooks/mfa/use-otp-enrollment.ts"
    },
    {
      "path": "src/hooks/use-config.ts",
      "content": "import * as React from 'react';\nimport type { Auth0ComponentConfig } from '@/types/auth-types';\n\nexport const Auth0ComponentConfigContext = React.createContext<{\n  config: Auth0ComponentConfig;\n}>({\n  config: {\n    themeSettings: { mode: 'light' },\n    customOverrides: {},\n    loader: undefined,\n  },\n});\n\n/**\n * Hook to access the Auth0 component configuration from context.\n */\nexport function useComponentConfig(): { config: Auth0ComponentConfig } {\n  const context = React.useContext(Auth0ComponentConfigContext);\n\n  if (!context) {\n    throw new Error('useComponentConfig must be used within an Auth0ComponentProvider');\n  }\n\n  return context;\n}\n",
      "type": "registry:hook",
      "target": "hooks/use-config.ts"
    },
    {
      "path": "src/hooks/use-core-client-initialization.ts",
      "content": "import * as React from 'react';\nimport type {\n  CoreClientInterface,\n  AuthDetailsCore,\n  I18nInitOptions,\n} from '@auth0-web-ui-components/core';\nimport { createCoreClient } from '@auth0-web-ui-components/core';\n\ninterface UseCoreClientInitializationProps {\n  authDetails: AuthDetailsCore;\n  i18nOptions?: I18nInitOptions;\n}\n\n/**\n * Custom hook to handle CoreClient initialization\n */\nexport const useCoreClientInitialization = ({\n  authDetails,\n  i18nOptions,\n}: UseCoreClientInitializationProps) => {\n  const [coreClient, setCoreClient] = React.useState<CoreClientInterface | null>(null);\n\n  React.useEffect(() => {\n    const initializeCoreClient = async () => {\n      try {\n        const initializedCoreClient = await createCoreClient(authDetails, i18nOptions);\n\n        setCoreClient(initializedCoreClient);\n      } catch (error) {\n        console.error('Failed to initialize CoreClient:', error);\n        setCoreClient(null);\n      }\n    };\n\n    initializeCoreClient();\n  }, [\n    authDetails.contextInterface?.getAccessTokenSilently,\n    i18nOptions?.currentLanguage,\n    i18nOptions?.fallbackLanguage,\n  ]);\n\n  return coreClient;\n};\n",
      "type": "registry:hook",
      "target": "hooks/use-core-client-initialization.ts"
    },
    {
      "path": "src/hooks/use-core-client.ts",
      "content": "import * as React from 'react';\nimport type { CoreClientInterface } from '@auth0-web-ui-components/core';\n\nconst CoreClientContext = React.createContext<{\n  coreClient: CoreClientInterface | null;\n}>({\n  coreClient: null,\n});\n\n/**\n * Hook to access the CoreClient instance from context.\n *\n * Provides access to the initialized CoreClient which handles API calls and business logic.\n *\n * @returns {{ coreClient: CoreClientInterface | null }} The current CoreClient instance or null if not initialized.\n *\n * @throws {Error} Throws if used outside of an Auth0ComponentProvider.\n */\nexport const useCoreClient = () => {\n  const context = React.useContext(CoreClientContext);\n  if (!context) {\n    throw new Error('useCoreClient must be used within Auth0ComponentProvider');\n  }\n  return context;\n};\n\nexport { CoreClientContext };\n",
      "type": "registry:hook",
      "target": "hooks/use-core-client.ts"
    },
    {
      "path": "src/hooks/use-theme.ts",
      "content": "'use client';\n\nimport { useContext } from 'react';\nimport { ThemeContext } from '@/providers/theme-provider';\n\n/**\n * useTheme\n *\n * Access the current theme from context. Includes:\n * - branding (UL theme)\n * - customerOverrides (CSS variables)\n * - mergedTheme (computed result)\n */\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n}\n",
      "type": "registry:hook",
      "target": "hooks/use-theme.ts"
    },
    {
      "path": "src/hooks/use-translator.ts",
      "content": "import { useMemo, useCallback } from 'react';\nimport { type TranslationFunction } from '@auth0-web-ui-components/core';\nimport { useCoreClient } from './use-core-client';\n\n/**\n * Custom hook for accessing the i18n service from CoreClient.\n *\n * This hook provides access to the i18n service from the CoreClient context,\n * including translation functions and language change capabilities.\n *\n * @param namespace - The translation namespace (e.g., 'mfa', 'common')\n * @param overrides - Optional translation overrides for the namespace\n * @returns An object containing the translator function and changeLanguage function\n *\n * @example\n * ```tsx\n * // Basic usage with namespace only\n * const { t, changeLanguage } = useTranslator('common');\n *\n * // Usage with overrides\n * const { t } = useTranslator('mfa', {\n *   title: 'Custom Title',\n *   'sms.title': 'Text Message'\n * });\n *\n * // Using the translator\n * const title = t('title');\n * const message = t('welcome', { name: 'John' });\n *\n * // Changing language\n * await changeLanguage('es-ES');\n * ```\n */\nexport function useTranslator(\n  namespace: string,\n  overrides?: Record<string, unknown>,\n): {\n  t: TranslationFunction;\n  changeLanguage: (language: string, fallbackLanguage?: string) => Promise<void>;\n  currentLanguage: string;\n  fallbackLanguage: string | undefined;\n} {\n  const { coreClient } = useCoreClient();\n\n  if (!coreClient) {\n    throw new Error(\n      'useTranslator must be used within Auth0ComponentProvider with initialized CoreClient',\n    );\n  }\n\n  const translator = useMemo(() => {\n    return coreClient.i18nService.translator(namespace, overrides);\n  }, [coreClient, namespace, overrides]);\n\n  const changeLanguage = useCallback(\n    async (language: string, fallbackLanguage?: string) => {\n      await coreClient.i18nService.changeLanguage(language, fallbackLanguage);\n    },\n    [coreClient],\n  );\n\n  return {\n    t: translator,\n    changeLanguage,\n    currentLanguage: coreClient.i18nService.currentLanguage,\n    fallbackLanguage: coreClient.i18nService.fallbackLanguage,\n  };\n}\n",
      "type": "registry:hook",
      "target": "hooks/use-translator.ts"
    },
    {
      "path": "src/lib/mfa-constants.ts",
      "content": "export const ENTER_OTP = 'enterOtp';\nexport const ENTER_QR = 'showQr';\nexport const ENTER_CONTACT = 'enterContact';\n\nexport const ENROLL = 'enroll';\nexport const CONFIRM = 'confirm';\n\nexport const QR_PHASE_INSTALLATION = 'installation';\nexport const QR_PHASE_SCAN = 'scan';\nexport const QR_PHASE_ENTER_OTP = 'enter-otp';\n",
      "type": "registry:file",
      "target": "lib/mfa-constants.ts"
    },
    {
      "path": "src/lib/svgs/apple-logo.tsx",
      "content": "import React from 'react';\n\nexport interface AppleLogoProps extends React.SVGProps<SVGSVGElement> {\n  width?: number | string;\n  height?: number | string;\n  title?: string;\n}\n\n/**\n * AppleLogo component renders the Apple SVG logo.\n *\n * @param props - Props including width, height, title, and standard SVG attributes.\n * @returns A JSX SVG element of the Apple logo.\n */\nconst AppleLogo: React.FC<AppleLogoProps> = ({\n  width = 30,\n  height = 30,\n  title = 'Apple logo',\n  ...props\n}) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={width}\n      height={height}\n      viewBox=\"0 0 30 30\"\n      role=\"img\"\n      aria-label={title}\n      {...props}\n    >\n      {title && <title>{title}</title>}\n      <path\n        d=\"M25.565,9.785c-0.123,0.077-3.051,1.702-3.051,5.305c0.138,4.109,3.695,5.55,3.756,5.55\n        c-0.061,0.077-0.537,1.963-1.947,3.94C23.204,26.283,21.962,28,20.076,28c-1.794,0-2.438-1.135-4.508-1.135\n        c-2.223,0-2.852,1.135-4.554,1.135c-1.886,0-3.22-1.809-4.4-3.496c-1.533-2.208-2.836-5.673-2.882-9\n        c-0.031-1.763,0.307-3.496,1.165-4.968c1.211-2.055,3.373-3.45,5.734-3.496c1.809-0.061,3.419,1.242,4.523,1.242\n        c1.058,0,3.036-1.242,5.274-1.242C21.394,7.041,23.97,7.332,25.565,9.785z M15.001,6.688c-0.322-1.61,0.567-3.22,1.395-4.247\n        c1.058-1.242,2.729-2.085,4.17-2.085c0.092,1.61-0.491,3.189-1.533,4.339C18.098,5.937,16.488,6.872,15.001,6.688z\"\n      />\n    </svg>\n  );\n};\n\nexport default React.memo(AppleLogo);\n",
      "type": "registry:file",
      "target": "lib/svgs/apple-logo.tsx"
    },
    {
      "path": "src/lib/svgs/google-logo.tsx",
      "content": "import React from 'react';\n\nexport interface GoogleLogoProps extends React.SVGProps<SVGSVGElement> {\n  width?: number | string;\n  height?: number | string;\n  title?: string;\n}\n\n/**\n * GoogleLogo component renders the Google \"G\" logo SVG.\n *\n * @param props - Props including width, height, title, and standard SVG attributes.\n * @returns A JSX SVG element of the Google logo.\n */\nconst GoogleLogo: React.FC<GoogleLogoProps> = ({\n  width = 48,\n  height = 48,\n  title = 'Google logo',\n  ...props\n}) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={width}\n      height={height}\n      viewBox=\"0 0 48 48\"\n      role=\"img\"\n      aria-label={title}\n      {...props}\n    >\n      {title && <title>{title}</title>}\n      <path\n        fill=\"#FFC107\"\n        d=\"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8\n           c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\n           C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20\n           C44,22.659,43.862,21.35,43.611,20.083z\"\n      />\n      <path\n        fill=\"#FF3D00\"\n        d=\"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12\n           c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4\n           C16.318,4,9.656,8.337,6.306,14.691z\"\n      />\n      <path\n        fill=\"#4CAF50\"\n        d=\"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238\n           C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025\n           C9.505,39.556,16.227,44,24,44z\"\n      />\n      <path\n        fill=\"#1976D2\"\n        d=\"M43.611,20.083H42V20H24v8h11.303\n           c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238\n           C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z\"\n      />\n    </svg>\n  );\n};\n\nexport default React.memo(GoogleLogo);\n",
      "type": "registry:file",
      "target": "lib/svgs/google-logo.tsx"
    },
    {
      "path": "src/lib/theme-utils.ts",
      "content": "import { clsx, type ClassValue } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\n/**\n * mergeThemes\n *\n * Merges the branding theme with customer overrides.\n * Customer values take precedence if there's a collision.\n */\nexport function mergeThemes(\n  branding: Record<string, unknown>,\n  customer: Record<string, unknown>,\n): Record<string, unknown> {\n  return {\n    ...branding,\n    ...customer,\n  };\n}\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n",
      "type": "registry:file",
      "target": "lib/theme-utils.ts"
    },
    {
      "path": "src/providers/component-provider.tsx",
      "content": "'use client';\n\nimport * as React from 'react';\nimport type { Auth0ComponentProviderProps } from '@/types/auth-types';\nimport { Spinner } from '@/components/ui/spinner';\nimport { Auth0ComponentConfigContext } from '@/hooks';\nimport { ThemeProvider } from './theme-provider';\nimport { ProxyProvider } from './proxy-provider';\nconst SpaProvider = React.lazy(() => import('./spa-provider'));\n\n/**\n * Auth0ComponentProvider\n *\n * The main Auth0 context provider component that conditionally\n * renders either the Proxy Mode or SPA Mode provider based on the presence\n * of `authProxyUrl`.\n *\n * - **Proxy Mode:** Used when authentication is handled externally via a proxy server.\n * - **SPA Mode:** Used when authentication is handled client-side using the Auth0 SPA SDK.\n *\n * This component abstracts the complexity of choosing the correct mode from the end user.\n *\n * @param {Object} props - Configuration props.\n * @param {React.ReactNode} props.children - Child components that require authentication context.\n * @param {Object} [props.i18n] - Internationalization configuration (language, fallback).\n * @param {Object} [props.themeSettings] - Theme and branding settings.\n * @param {Object} [props.customOverrides] - Optional CSS variable overrides for styling.\n * @param {React.ReactNode} [props.loader] - Custom loading component to show while\n *                                                    authentication is initializing.\n *                                                    Defaults to \"Loading authentication...\".\n *\n * @returns {JSX.Element} The provider component for Auth0 context.\n *\n * @example\n * ```tsx\n * <Auth0ComponentProvider\n *   authProxyUrl=\"/api/auth\"\n *   i18n={{ currentLanguage: 'en', fallbackLanguage: 'en' }}\n *   themeSettings={{ mode: 'dark' }}\n * >\n *   <App />\n * </Auth0ComponentProvider>\n * ```\n */\nexport const Auth0ComponentProvider = ({\n  i18n,\n  authDetails,\n  themeSettings = { mode: 'light' },\n  customOverrides = {},\n  loader,\n  children,\n}: Auth0ComponentProviderProps & { children: React.ReactNode }) => {\n  const config = React.useMemo(\n    () => ({\n      themeSettings,\n      customOverrides,\n      loader,\n    }),\n    [themeSettings, customOverrides, loader],\n  );\n\n  return (\n    <Auth0ComponentConfigContext.Provider value={{ config }}>\n      <ThemeProvider theme={{ branding: themeSettings, customOverrides }}>\n        <React.Suspense fallback={loader || <Spinner />}>\n          {authDetails?.authProxyUrl ? (\n            <ProxyProvider i18n={i18n} authDetails={authDetails}>\n              {children}\n            </ProxyProvider>\n          ) : (\n            <SpaProvider i18n={i18n} authDetails={authDetails}>\n              {children}\n            </SpaProvider>\n          )}\n        </React.Suspense>\n      </ThemeProvider>\n    </Auth0ComponentConfigContext.Provider>\n  );\n};\n",
      "type": "registry:file",
      "target": "providers/component-provider.tsx"
    },
    {
      "path": "src/providers/proxy-provider.tsx",
      "content": "'use client';\n\nimport * as React from 'react';\nimport type { InternalProviderProps } from '@/types/auth-types';\nimport { CoreClientContext } from '@/hooks/use-core-client';\nimport { useCoreClientInitialization } from '@/hooks/use-core-client-initialization';\n\nexport const ProxyProvider = ({\n  i18n,\n  authDetails,\n  children,\n}: InternalProviderProps & { children: React.ReactNode }) => {\n  const coreClient = useCoreClientInitialization({\n    authDetails: {\n      ...authDetails,\n      contextInterface: undefined,\n    },\n    i18nOptions: i18n,\n  });\n\n  const coreClientValue = React.useMemo(\n    () => ({\n      coreClient,\n    }),\n    [coreClient],\n  );\n\n  return (\n    <CoreClientContext.Provider value={coreClientValue}>{children}</CoreClientContext.Provider>\n  );\n};\n\nexport default ProxyProvider;\n",
      "type": "registry:file",
      "target": "providers/proxy-provider.tsx"
    },
    {
      "path": "src/providers/spa-provider.tsx",
      "content": "'use client';\n\nimport * as React from 'react';\nimport type { InternalProviderProps } from '@/types/auth-types';\nimport { CoreClientContext } from '@/hooks/use-core-client';\nimport { useCoreClientInitialization } from '@/hooks/use-core-client-initialization';\nimport { useAuth0 } from '@auth0/auth0-react';\n\nexport const SpaProvider = ({\n  i18n,\n  authDetails,\n  children,\n}: InternalProviderProps & { children: React.ReactNode }) => {\n  const auth0ContextInterface = useAuth0();\n\n  const coreClient = useCoreClientInitialization({\n    authDetails: {\n      ...authDetails,\n      contextInterface: auth0ContextInterface,\n    },\n    i18nOptions: i18n,\n  });\n\n  const coreClientValue = React.useMemo(\n    () => ({\n      coreClient,\n    }),\n    [coreClient],\n  );\n\n  return (\n    <CoreClientContext.Provider value={coreClientValue}>{children}</CoreClientContext.Provider>\n  );\n};\n\nexport default SpaProvider;\n",
      "type": "registry:file",
      "target": "providers/spa-provider.tsx"
    },
    {
      "path": "src/providers/theme-provider.tsx",
      "content": "'use client';\n\nimport * as React from 'react';\nimport { mergeThemes } from '@/lib/theme-utils';\nimport type {\n  BrandingTheme,\n  CustomOverrides,\n  ThemeContextValue,\n  ThemeInput,\n} from '../types/theme-types';\n\n/**\n * Default branding theme if none is provided.\n */\nconst defaultBranding: BrandingTheme = {\n  mode: 'light',\n};\n\n/**\n * Default empty customer overrides.\n */\nconst defaultCustomOverrides: CustomOverrides = {};\n\n/**\n * ThemeContext\n *\n * Provides access to branding theme, customer overrides,\n * and a merged theme object for convenience.\n */\nexport const ThemeContext = React.createContext<ThemeContextValue>({\n  branding: defaultBranding,\n  customOverrides: defaultCustomOverrides,\n  mergedTheme: mergeThemes(defaultBranding, defaultCustomOverrides),\n});\n\n/**\n * ThemeProvider\n *\n * Provides theme configuration via React Context to all components in the tree.\n * It merges a branding theme (from UL) and optional customer overrides (CSS variables).\n *\n * @param theme - Optional branding and customerOverrides\n * @param children - The components that will have access to the theme\n *\n * @example\n * ```tsx\n * <ThemeProvider\n *   theme={{\n *     branding: { mode: 'dark', primaryColor: '#0070f3' },\n *     customerOverrides: { '--font-size': '14px' }\n *   }}\n * >\n *   <App />\n * </ThemeProvider>\n * ```\n */\nexport const ThemeProvider: React.FC<{\n  theme?: ThemeInput;\n  children: React.ReactNode;\n}> = ({ theme, children }) => {\n  const branding = React.useMemo(() => theme?.branding ?? defaultBranding, [theme?.branding]);\n  const customOverrides = React.useMemo(\n    () => theme?.customOverrides ?? defaultCustomOverrides,\n    [theme?.customOverrides],\n  );\n\n  const mergedTheme = React.useMemo(\n    () => mergeThemes(branding, customOverrides),\n    [branding, customOverrides],\n  );\n\n  return (\n    <ThemeContext.Provider value={{ branding, customOverrides, mergedTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n};\n",
      "type": "registry:file",
      "target": "providers/theme-provider.tsx"
    },
    {
      "path": "src/types/auth-types.ts",
      "content": "import * as React from 'react';\nimport { AuthDetailsCore } from '@auth0-web-ui-components/core';\nimport { I18nOptions } from './i18n-types';\nimport { CustomOverrides, ThemeSettings } from './theme-types';\n\n/**\n * Auth0 authentication details with optional React-specific properties.\n */\nexport type AuthDetails = Omit<AuthDetailsCore, 'accessToken'>;\n\n/**\n * Props for the Auth0ComponentProvider component.\n */\nexport interface Auth0ComponentProviderProps {\n  i18n?: I18nOptions;\n  themeSettings?: ThemeSettings;\n  authDetails?: AuthDetails;\n  customOverrides?: CustomOverrides;\n  loader?: React.ReactNode;\n}\n\n/**\n * Props for the InternalProvider component.\n */\nexport interface InternalProviderProps {\n  i18n?: I18nOptions;\n  authDetails?: AuthDetails;\n}\n\n/**\n * Configuration for Auth0ComponentProvider excluding authentication details.\n */\nexport type Auth0ComponentConfig = Omit<Auth0ComponentProviderProps, 'authDetails' | 'i18n'>;\n",
      "type": "registry:file",
      "target": "types/auth-types.ts"
    },
    {
      "path": "src/types/index.ts",
      "content": "export * from './mfa-types';\n",
      "type": "registry:file",
      "target": "types/index.ts"
    },
    {
      "path": "src/types/mfa-types.ts",
      "content": "import type {\n  EnrollMfaResponse,\n  Authenticator,\n  MFAType,\n  EnrollOptions,\n  ConfirmEnrollmentOptions,\n  MFAMessages,\n} from '@auth0-web-ui-components/core';\n\nexport interface UserMFAMgmtProps {\n  customMessages?: Partial<MFAMessages>;\n  hideHeader?: boolean;\n  showActiveOnly?: boolean;\n  disableEnroll?: boolean;\n  disableDelete?: boolean;\n  readOnly?: boolean;\n  factorConfig?: {\n    [key in MFAType]?: {\n      visible?: boolean;\n      enabled?: boolean;\n    };\n  };\n  onEnroll?: () => void;\n  onDelete?: () => void;\n  onFetch?: () => void;\n  onErrorAction?: (error: Error, action: 'enroll' | 'delete' | 'confirm') => void;\n  onBeforeAction?: (\n    action: 'enroll' | 'delete' | 'confirm',\n    factorType: MFAType,\n  ) => boolean | Promise<boolean>;\n  schemaValidation?: { email?: RegExp; phone?: RegExp };\n}\n\n/**\n * Result returned by the `useMFA` hook.\n * Provides methods to fetch, enroll, and delete MFA authenticators.\n */\nexport type UseMFAResult = {\n  /**\n   * Fetch the list of MFA authenticators.\n   * @param onlyActive - Whether to return only active authenticators.\n   * @returns A promise resolving to array of authenticators.\n   */\n  fetchFactors: (onlyActive?: boolean) => Promise<Authenticator[]>;\n\n  /**\n   * Enroll a new MFA factor (e.g., SMS, TOTP, Email).\n   * @param factorName - The type of MFA to enroll.\n   * @param options - Optional options like phone number or email.\n   * @returns A promise resolving to the enrollment response.\n   */\n  enrollMfa: (factorName: MFAType, options?: EnrollOptions) => Promise<EnrollMfaResponse>;\n\n  /**\n   * Delete an enrolled MFA authenticator by its ID.\n   * @param authenticatorId - The ID of the authenticator to delete.\n   * @returns A promise resolving to a success flag.\n   */\n  deleteMfa: (authenticatorId: string) => Promise<void>;\n\n  /**\n   * Confirm MFA enrollment with OOB code and user OTP code.\n   * @param factorName The MFA factor type.\n   * @param options The confirmation codes required to verify enrollment.\n   */\n  confirmEnrollment: (factorName: MFAType, options: ConfirmEnrollmentOptions) => Promise<unknown>;\n};\n",
      "type": "registry:file",
      "target": "types/mfa-types.ts"
    },
    {
      "path": "src/blocks/user-mfa-management.tsx",
      "content": "import * as React from 'react';\nimport { MoreVertical, Trash2, Mail, Smartphone } from 'lucide-react';\n\nimport {\n  Authenticator,\n  type MFAType,\n  FACTOR_TYPE_EMAIL,\n  FACTOR_TYPE_SMS,\n} from '@auth0-web-ui-components/core';\n\nimport type { UserMFAMgmtProps } from '@/types';\n\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardContent, CardDescription, CardTitle } from '@/components/ui/card';\nimport { toast } from 'sonner';\nimport { Button } from '@/components/ui/button';\nimport { Toaster } from '@/components/ui/sonner';\nimport { ENROLL, CONFIRM } from '@/lib/mfa-constants';\nimport { UserMFASetupForm } from '@/components/mfa/user-mfa-setup-form';\nimport { Spinner } from '@/components/ui/spinner';\nimport { List, ListItem } from '@/components/ui/list';\nimport { Popover, PopoverTrigger, PopoverContent } from '@/components/ui/popover';\nimport { DeleteFactorConfirmation } from '@/components/mfa/delete-factor-confirmation';\n\nimport { withCoreClient } from '@/hoc';\nimport { useComponentConfig, useMFA, useTranslator } from '@/hooks';\n\n/**\n * UserMFAMgmt Component\n *\n * A component responsible for managing Multi-Factor Authentication (MFA) factors for a user.\n * This component handles fetching the MFA access token, fetching authenticators, enrolling, and deletion of MFA factors, and manages the MFA access token.\n * It operates in both ProxyMode (RWA) and SPA modes for authentication.\n *\n * - **ProxyMode (RWA)**: In this mode, the component interacts with a proxy service to manage MFA\n * - **SPA (Single Page Application)**: In this mode, the component communicates directly with the API to manage MFA factors.\n * * @param {Object} props - The properties passed to the component.\n * @param {Object} [props.customMessages] - Custom messages to override default translations for this component instance.\n * @param {boolean} [props.hideHeader=false] - Whether to hide the header.\n * @param {boolean} [props.showActiveOnly=false] - Whether to show only active MFA factors.\n * @param {boolean} [props.disableEnroll=false] - Whether to disable the enrollment of new factors.\n * @param {boolean} [props.disableDelete=false] - Whether to disable the deletion of factors.\n * @param {boolean} [props.readOnly=false] - Whether the component is in read-only mode.\n * @param {Object} [props.factorConfig={}] - Configuration for MFA factors, controlling visibility and enabled state.\n * @param {Function} [props.onEnroll] - Callback fired when an MFA factor is successfully enrolled.\n * @param {Function} [props.onDelete] - Callback fired when an MFA factor is successfully deleted.\n * @param {Function} [props.onFetch] - Callback fired when MFA factors are fetched.\n * @param {Function} [props.onErrorAction] - Callback fired when an error occurs during an action (enroll/delete).\n * @param {Function} [props.onBeforeAction] - Callback fired before performing an action (enroll/delete).\n * @param {Object} [props.schemaValidation] - Optional validation schema for email and phone number fields.\n *   @param {RegExp} [props.schemaValidation.email] - Regex for validating email input.\n *   @param {RegExp} [props.schemaValidation.phone] - Regex for validating phone number input.\n *\n * @example\n * <UserMFAMgmt\n *   localization={{\n *     title: 'Manage MFA Factors',\n *     description: 'Here you can manage your Multi-Factor Authentication (MFA) factors.',\n *     loading: 'Loading...',\n *     errors: {\n *       factorsLoadingError: 'An error occurred while loading MFA factors.',\n *     },\n *     no_active_mfa: 'No active MFA factors found.',\n *     enroll_factor: 'Successfully enrolled the MFA factor.',\n *     remove_factor: 'Successfully removed the MFA factor.',\n *     delete: 'Delete',\n *     enroll: 'Enroll',\n *   }}\n *   hideHeader={false}\n *   showActiveOnly={false}\n *   disableEnroll={false}\n *   disableDelete={false}\n *   readOnly={false}\n *   factorConfig={{}}\n *   onEnroll={() => {}}\n *   onDelete={() => {}}\n *   onFetch={() => {}}\n *   onErrorAction={() => {}}\n *   onBeforeAction={() => {}}\n *   schemaValidation={{\n *     email: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\n *     phone: /^\\+?[1-9]\\d{1,14}$/\n *   }}\n * />\n *\n * @returns {React.JSX.Element} The rendered component.\n */\nfunction UserMFAMgmtComponent({\n  customMessages = {},\n  hideHeader = false,\n  showActiveOnly = false,\n  disableEnroll = false,\n  disableDelete = false,\n  readOnly = false,\n  factorConfig = {},\n  onEnroll,\n  onDelete,\n  onFetch,\n  onErrorAction,\n  onBeforeAction,\n  schemaValidation,\n}: UserMFAMgmtProps): React.JSX.Element {\n  const { t } = useTranslator('mfa', customMessages);\n  const {\n    config: { loader },\n  } = useComponentConfig();\n  const { fetchFactors, enrollMfa, deleteMfa, confirmEnrollment } = useMFA();\n\n  const [factors, setFactors] = React.useState<Authenticator[]>([]);\n  const [loading, setLoading] = React.useState(true);\n  const [error, setError] = React.useState<string | null>(null);\n  const [isDeletingFactor, setIsDeletingFactor] = React.useState(false);\n  const [dialogOpen, setDialogOpen] = React.useState(false);\n  const [enrollFactor, setEnrollFactor] = React.useState<MFAType | null>(null);\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = React.useState(false);\n  const [factorToDelete, setFactorToDelete] = React.useState<{\n    id: string;\n    type: MFAType;\n  } | null>(null);\n\n  /**\n   * Loads the available MFA factors from the API and updates the state.\n   * This is called on initial load and when factors need to be refreshed.\n   */\n  const loadFactors = React.useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const factors = await fetchFactors(showActiveOnly);\n      setFactors(factors);\n      onFetch?.();\n    } catch (err) {\n      setError(t('errors.factors_loading_error'));\n    }\n\n    setLoading(false);\n  }, [fetchFactors, showActiveOnly, onFetch, onErrorAction]);\n\n  React.useEffect(() => {\n    loadFactors();\n  }, [loadFactors]);\n\n  /**\n   * Filters visible MFA factors based on the provided factor configuration.\n   * Each factor's visibility is determined by the configuration settings.\n   *\n   * @returns {Authenticator[]} Filtered MFA factors.\n   */\n  const visibleFactors = React.useMemo(() => {\n    return factors.filter((factor) => {\n      const config = factorConfig[factor.factorName as keyof typeof factorConfig];\n      return config?.visible !== false;\n    });\n  }, [factors, factorConfig]);\n\n  /**\n   * Handles the enrollment button click for a specific MFA factor.\n   * Opens the enrollment dialog for the chosen factor.\n   *\n   * @param {MFAType} factor - The MFA factor to be enrolled.\n   */\n  const handleEnroll = (factor: MFAType) => {\n    setEnrollFactor(factor);\n    setDialogOpen(true);\n  };\n\n  const handleCloseDialog = React.useCallback(() => {\n    setDialogOpen(false);\n    setEnrollFactor(null);\n  }, []);\n\n  /**\n   * Handles the initial click on the delete button for an MFA factor.\n   * This function either:\n   * 1. Triggers the onBeforeAction callback and proceeds with deletion if approved\n   * 2. Opens a confirmation dialog if no onBeforeAction is provided\n   *\n   * The function prevents deletion if:\n   * - Component is in readonly mode\n   * - Delete action is disabled\n   * - onBeforeAction returns false\n   *\n   * @param {string} factorId - The unique identifier of the MFA factor to delete\n   * @param {MFAType} factorType - The type of MFA factor being deleted (e.g., 'sms', 'email', 'totp')\n   * @returns {Promise<void>}\n   */\n  const handleDeleteFactor = React.useCallback(\n    async (factorId: string, factorType: MFAType) => {\n      if (readOnly || disableDelete) return;\n\n      if (onBeforeAction) {\n        // If onBeforeAction exists, proceed directly\n        const canProceed = await onBeforeAction('delete', factorType);\n        if (!canProceed) return;\n        await handleConfirmDelete(factorId);\n      } else {\n        setFactorToDelete({ id: factorId, type: factorType });\n        setIsDeleteDialogOpen(true);\n      }\n    },\n    [readOnly, disableDelete, onBeforeAction],\n  );\n\n  /**\n   * Handles the confirmation and execution of MFA factor deletion.\n   * This callback is triggered when a user confirms the deletion in the confirmation dialog\n   * or when deletion is approved through onBeforeAction.\n   *\n   * The function:\n   * 1. Deletes the MFA factor\n   * 2. Reloads the factors list\n   * 3. Shows success/error notifications\n   * 4. Handles cleanup of dialog and loading states\n   *\n   * @param {string} factorId - The unique identifier of the MFA factor to delete\n   * @throws {Error} When deletion fails or factors cannot be reloaded\n   */\n  const handleConfirmDelete = React.useCallback(\n    async (factorId: string) => {\n      setIsDeletingFactor(true);\n\n      const cleanUp = () => {\n        setIsDeletingFactor(false);\n        setIsDeleteDialogOpen(false);\n        setFactorToDelete(null);\n      };\n\n      try {\n        await deleteMfa(factorId);\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error(t('errors.delete_factor'));\n        toast.error(t('errors.delete_factor'));\n        onErrorAction?.(error, 'delete');\n        cleanUp();\n        return;\n      }\n\n      toast.success(t('remove_factor'), {\n        duration: 2000,\n        onAutoClose: () => onDelete?.(),\n      });\n\n      try {\n        await loadFactors();\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error(t('errors.factors_loading_error'));\n        onErrorAction?.(error, 'delete');\n      } finally {\n        cleanUp();\n      }\n    },\n    [deleteMfa, loadFactors, onDelete, onErrorAction, t],\n  );\n\n  /**\n   * Handles the successful enrollment of an MFA factor.\n   * Displays a success message and reloads the factors list.\n   */\n  const handleEnrollSuccess = React.useCallback(async () => {\n    setDialogOpen(false);\n    setEnrollFactor(null);\n    try {\n      toast.success(t('enroll_factor'), {\n        duration: 2000,\n        onAutoClose: () => {\n          onEnroll?.();\n        },\n      });\n      await loadFactors();\n    } catch {\n      toast.dismiss();\n      toast.error(t('errors.factors_loading_error'));\n    }\n  }, [loadFactors, onEnroll, t]);\n\n  /**\n   * Handles errors during the enrollment or confirmation process.\n   *\n   * @param {Error} error - The error object containing the failure message.\n   * @param {string} stage - The stage of the process ('enroll' or 'confirm').\n   */\n  const handleEnrollError = React.useCallback(\n    (error: Error, stage: typeof ENROLL | typeof CONFIRM) => {\n      toast.error(\n        `${stage === ENROLL ? t('enrollment') : t('confirmation')} ${t('errors.failed', { message: error.message })}`,\n      );\n      onErrorAction?.(error, stage);\n    },\n    [onErrorAction, t],\n  );\n\n  return (\n    <>\n      <Toaster position=\"top-right\" />\n      {loading ? (\n        loader || <Spinner aria-label={t('loading')} />\n      ) : (\n        <Card className=\"bg-white py-10 px-8 sm:py-8 sm:px-6\">\n          <CardContent>\n            {error ? (\n              <div\n                className=\"flex flex-col items-center justify-center p-4 space-y-2\"\n                role=\"alert\"\n                aria-live=\"assertive\"\n              >\n                <h1\n                  className=\"text-base font-medium text-center text-destructive\"\n                  id=\"mfa-management-title\"\n                >\n                  {t('component_error_title')}\n                </h1>\n                <p className=\"text-sm text-center text-destructive whitespace-pre-line\">\n                  {t('component_error_description')}\n                </p>\n              </div>\n            ) : (\n              <>\n                {!hideHeader && (\n                  <>\n                    <CardTitle>\n                      <h1 className=\"text-2xl font-medium text-left\" id=\"mfa-management-title\">\n                        {t('title')}\n                      </h1>\n                    </CardTitle>\n                    <CardDescription id=\"mfa-management-desc\">\n                      <p className=\"text-sm text-muted-foreground text-left\">{t('description')}</p>\n                    </CardDescription>\n                  </>\n                )}\n                {showActiveOnly && visibleFactors.length === 0 ? (\n                  <p className=\"text-center text-muted-foreground\" role=\"status\">\n                    {t('no_active_mfa')}\n                  </p>\n                ) : (\n                  <List\n                    className=\"flex flex-col gap-0 w-full\"\n                    aria-labelledby=\"mfa-management-title\"\n                    aria-describedby=\"mfa-management-desc\"\n                  >\n                    {visibleFactors.map((factor, idx) => {\n                      const isEnabledFactor =\n                        factorConfig?.[factor.factorName as MFAType]?.enabled !== false;\n                      return (\n                        <React.Fragment key={`${factor.name}-${idx}`}>\n                          <ListItem\n                            className={`w-full p-0 m-0 ${!isEnabledFactor ? 'opacity-50 pointer-events-none' : ''}`}\n                            aria-disabled={!isEnabledFactor}\n                            tabIndex={0}\n                            aria-label={t(`${factor.factorName}.title`)}\n                          >\n                            <div className=\"flex w-full flex-col sm:flex-row items-start py-6 gap-2 sm:gap-4\">\n                              <div className=\"flex flex-col min-w-0 gap-2 flex-grow w-full\">\n                                <div className=\"grid grid-cols-4 gap-2 sm:gap-6 items-center w-full\">\n                                  <div className=\"col-span-4 sm:col-span-3 text-left text-base font-medium flex flex-row flex-wrap items-center gap-2 sm:gap-3 break-words w-full\">\n                                    <span\n                                      className=\"break-words whitespace-normal\"\n                                      id={`factor-title-${idx}`}\n                                    >\n                                      {t(`${factor.factorName}.title`)}\n                                    </span>\n                                    {factor.active && (\n                                      <Badge\n                                        variant=\"success\"\n                                        size=\"sm\"\n                                        className=\"shrink-0\"\n                                        aria-label={t('enabled')}\n                                      >\n                                        {t('enabled')}\n                                      </Badge>\n                                    )}\n                                  </div>\n                                  {!factor.active && !readOnly && (\n                                    <div className=\"col-span-4 sm:col-span-1 flex justify-end mt-2 sm:mt-0 w-full sm:w-auto\">\n                                      <Button\n                                        size=\"default\"\n                                        variant=\"outline\"\n                                        className=\"text-sm\"\n                                        onClick={() => handleEnroll(factor.factorName as MFAType)}\n                                        disabled={disableEnroll || !isEnabledFactor}\n                                        aria-label={t(`${factor.factorName}.button-text`)}\n                                        aria-describedby={`factor-title-${idx}`}\n                                      >\n                                        {t(`${factor.factorName}.button-text`)}\n                                      </Button>\n                                    </div>\n                                  )}\n                                  {factor.active &&\n                                    !(\n                                      factor.factorName === FACTOR_TYPE_SMS ||\n                                      factor.factorName === FACTOR_TYPE_EMAIL\n                                    ) &&\n                                    !readOnly && (\n                                      <div className=\"flex justify-end\">\n                                        <Popover>\n                                          <PopoverTrigger asChild>\n                                            <Button\n                                              variant=\"ghost\"\n                                              size=\"icon\"\n                                              aria-label={t('actions')}\n                                              className=\"p-2\"\n                                              tabIndex={0}\n                                            >\n                                              <MoreVertical\n                                                className=\"w-5 h-5\"\n                                                aria-hidden=\"true\"\n                                              />\n                                            </Button>\n                                          </PopoverTrigger>\n                                          <PopoverContent className=\"w-30 p-2\" role=\"menu\">\n                                            <Button\n                                              size=\"sm\"\n                                              variant=\"ghost\"\n                                              className=\"flex items-center justify-start px-4 py-2 gap-2 text-red-600 font-normal text-sm\"\n                                              onClick={() =>\n                                                handleDeleteFactor(\n                                                  factor.id,\n                                                  factor.factorName as MFAType,\n                                                )\n                                              }\n                                              disabled={\n                                                disableDelete ||\n                                                isDeletingFactor ||\n                                                !isEnabledFactor\n                                              }\n                                              aria-label={t('remove')}\n                                              role=\"menuitem\"\n                                            >\n                                              <Trash2\n                                                className=\"w-4 h-4 mr-1 color-red-10\"\n                                                aria-hidden=\"true\"\n                                              />\n                                              <span className=\"color-red-10\">{t('remove')}</span>\n                                            </Button>\n                                          </PopoverContent>\n                                        </Popover>\n                                      </div>\n                                    )}\n                                </div>\n                                {factor.active &&\n                                (factor.factorName === FACTOR_TYPE_SMS ||\n                                  factor.factorName === FACTOR_TYPE_EMAIL) ? (\n                                  <Card\n                                    className=\"border rounded-lg shadow-none bg-transparent p-0 w-full mt-2\"\n                                    aria-label={t(`${factor.factorName}.title`)}\n                                  >\n                                    <CardContent className=\"flex flex-row items-center justify-between gap-3 p-3 w-full\">\n                                      <div className=\"flex items-center gap-3\">\n                                        {factor.factorName === FACTOR_TYPE_SMS ? (\n                                          <Smartphone\n                                            className=\"w-5 h-5 text-muted-foreground\"\n                                            aria-hidden=\"true\"\n                                          />\n                                        ) : (\n                                          <Mail\n                                            className=\"w-5 h-5 text-muted-foreground\"\n                                            aria-hidden=\"true\"\n                                          />\n                                        )}\n                                        <span className=\"font-medium text-base text-foreground\">\n                                          {factor.name}\n                                        </span>\n                                      </div>\n                                      {!readOnly && (\n                                        <Popover>\n                                          <PopoverTrigger asChild>\n                                            <Button\n                                              variant=\"ghost\"\n                                              size=\"icon\"\n                                              aria-label={t('actions')}\n                                              className=\"p-2\"\n                                              tabIndex={0}\n                                            >\n                                              <MoreVertical\n                                                className=\"w-5 h-5\"\n                                                aria-hidden=\"true\"\n                                              />\n                                            </Button>\n                                          </PopoverTrigger>\n                                          <PopoverContent className=\"w-30 p-2\" role=\"menu\">\n                                            <Button\n                                              size=\"sm\"\n                                              variant=\"ghost\"\n                                              className=\"flex items-center justify-start px-4 py-2 gap-2 text-red-600 font-normal text-sm\"\n                                              onClick={() =>\n                                                handleDeleteFactor(\n                                                  factor.id,\n                                                  factor.factorName as MFAType,\n                                                )\n                                              }\n                                              disabled={\n                                                disableDelete ||\n                                                isDeletingFactor ||\n                                                !isEnabledFactor\n                                              }\n                                              aria-label={t('remove')}\n                                              role=\"menuitem\"\n                                            >\n                                              <Trash2\n                                                className=\"w-4 h-4 mr-1 color-red-10\"\n                                                aria-hidden=\"true\"\n                                              />\n                                              <span className=\"color-red-10\">{t('remove')}</span>\n                                            </Button>\n                                          </PopoverContent>\n                                        </Popover>\n                                      )}\n                                    </CardContent>\n                                  </Card>\n                                ) : !factor.active ? (\n                                  <p\n                                    className=\"font-normal text-muted-foreground text-left break-words mt-1\"\n                                    id={`factor-desc-${idx}`}\n                                  >\n                                    {t(`${factor.factorName}.description`)}\n                                  </p>\n                                ) : null}\n                              </div>\n                            </div>\n                          </ListItem>\n                        </React.Fragment>\n                      );\n                    })}\n                  </List>\n                )}\n              </>\n            )}\n          </CardContent>\n        </Card>\n      )}\n      {enrollFactor && (\n        <UserMFASetupForm\n          open={dialogOpen}\n          onClose={handleCloseDialog}\n          factorType={enrollFactor}\n          enrollMfa={enrollMfa}\n          confirmEnrollment={confirmEnrollment}\n          onSuccess={handleEnrollSuccess}\n          onError={handleEnrollError}\n          schemaValidation={schemaValidation}\n        />\n      )}\n      <DeleteFactorConfirmation\n        open={isDeleteDialogOpen}\n        onOpenChange={(open) => !isDeletingFactor && setIsDeleteDialogOpen(open)}\n        factorToDelete={factorToDelete}\n        isDeletingFactor={isDeletingFactor}\n        onConfirm={handleConfirmDelete}\n        onCancel={() => setIsDeleteDialogOpen(false)}\n      />\n    </>\n  );\n}\n\nexport const UserMFAMgmt = withCoreClient(UserMFAMgmtComponent);\n",
      "type": "registry:block",
      "target": "blocks/user-mfa-management.tsx"
    },
    {
      "path": "src/hoc/with-core-client.tsx",
      "content": "import * as React from 'react';\nimport { useComponentConfig, useCoreClient } from '../hooks';\nimport { Spinner } from '../components/ui/spinner';\n\n/**\n * Higher-Order Component that ensures the core client is initialized before rendering the wrapped component.\n *\n * This HOC is useful for components that depend on the core client (like MFA operations)\n * and need to wait for it to be properly initialized before they can function.\n *\n * @param WrappedComponent - The component that requires core client to be initialized\n * @returns A new component that handles core client initialization and loading states\n */\nexport function withCoreClient<P extends object>(\n  WrappedComponent: React.ComponentType<P>,\n): React.ComponentType<P> {\n  const WithCoreClientComponent = (props: P) => {\n    const {\n      config: { loader },\n    } = useComponentConfig();\n    const { coreClient } = useCoreClient();\n\n    if (!coreClient) {\n      return <>{loader || <Spinner />}</>;\n    }\n\n    return <WrappedComponent {...props} />;\n  };\n\n  // Set display name for better debugging\n  WithCoreClientComponent.displayName = WrappedComponent.displayName || WrappedComponent.name;\n\n  return WithCoreClientComponent;\n}\n",
      "type": "registry:file",
      "target": "hoc/with-core-client.tsx"
    }
  ]
}
